<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alphabet Adventure Island</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(147, 51, 234, 0.5); }
            50% { box-shadow: 0 0 40px rgba(147, 51, 234, 0.8); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .floating { animation: float 3s ease-in-out infinite; }
        .letter-tile { transition: all 0.3s; cursor: pointer; }
        .letter-tile:hover { transform: scale(1.15) rotate(5deg); box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.3); }
        .letter-tile.selected { animation: pulse-glow 1s ease-in-out infinite; transform: scale(1.1); }
        .card-flip { transform-style: preserve-3d; transition: transform 0.6s; }
        .card-flip.flipped { transform: rotateY(180deg); }
        .card-front, .card-back { backface-visibility: hidden; }
        .card-back { transform: rotateY(180deg); position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .shake { animation: shake 0.5s; }
        .success { animation: pulse-glow 1s; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 min-h-screen font-sans">
    <!-- Main Container -->
    <div class="container mx-auto px-4 py-8">
        <!-- Header com Controles -->
        <header class="text-center mb-8">
            <h1 class="text-5xl font-bold text-purple-800 mb-2 floating">🏝️ Alphabet Adventure Island</h1>
            <p class="text-xl text-blue-600 mb-4">Uma jornada mágica para aprender a ler!</p>
            
            <!-- Controles de Volume e Modo -->
            <div class="flex justify-center gap-4 mb-4">
                <button id="volumeBtn" class="bg-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all">
                    <span class="text-2xl">🔊</span>
                </button>
                <button id="modeBtn" class="bg-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all font-bold text-purple-700">
                    Modo: Normal
                </button>
            </div>
            
            <!-- Pontuação -->
            <div class="bg-yellow-200 inline-block px-8 py-3 rounded-full shadow-lg">
                <span class="text-2xl font-bold text-yellow-800">⭐ Pontos: <span id="score">0</span></span>
            </div>
        </header>

        <!-- Explorador de Letras Interativo -->
        <section class="bg-white rounded-3xl p-8 shadow-2xl mb-8">
            <h2 class="text-3xl font-bold text-blue-800 mb-6 flex items-center gap-3">
                <span class="text-4xl">📚</span> Explorador de Letras
            </h2>
            
            <!-- Display da Letra Atual -->
            <div class="text-center mb-8">
                <div id="currentLetter" class="inline-block bg-gradient-to-br from-blue-400 to-purple-500 text-white text-9xl font-bold rounded-3xl p-12 shadow-2xl min-w-[200px]">
                    A
                </div>
                <div class="mt-4">
                    <button id="speakBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-full text-xl transition-all shadow-lg">
                        🔊 Falar Letra
                    </button>
                </div>
            </div>
            
            <!-- Alfabeto Completo -->
            <div class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-9 gap-3" id="letterGrid">
                <!-- Letras serão geradas dinamicamente -->
            </div>
        </section>

        <!-- Construtor de Sílabas -->
        <section class="bg-white rounded-3xl p-8 shadow-2xl mb-8">
            <h2 class="text-3xl font-bold text-purple-800 mb-6 flex items-center gap-3">
                <span class="text-4xl">🧩</span> Construtor de Sílabas
            </h2>
            
            <div class="text-center mb-6">
                <div id="syllableDisplay" class="inline-block bg-gradient-to-br from-purple-400 to-pink-500 text-white text-7xl font-bold rounded-3xl p-8 shadow-2xl min-w-[180px]">
                    --
                </div>
                <button id="speakSyllable" class="block mx-auto mt-4 bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full transition-all">
                    🔊 Falar Sílaba
                </button>
            </div>
            
            <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                <div>
                    <p class="text-center font-bold text-gray-700 mb-2">Consoante</p>
                    <div class="grid grid-cols-3 gap-2" id="consonantGrid"></div>
                </div>
                <div>
                    <p class="text-center font-bold text-gray-700 mb-2">Vogal</p>
                    <div class="grid grid-cols-3 gap-2" id="vowelGrid"></div>
                </div>
            </div>
            
            <button id="clearSyllable" class="block mx-auto mt-6 bg-red-400 hover:bg-red-500 text-white font-bold py-2 px-6 rounded-full transition-all">
                🔄 Limpar
            </button>
        </section>

        <!-- Jogo da Memória -->
        <section class="bg-white rounded-3xl p-8 shadow-2xl mb-8">
            <h2 class="text-3xl font-bold text-green-800 mb-6 flex items-center gap-3">
                <span class="text-4xl">🎮</span> Jogo da Memória
            </h2>
            
            <div class="text-center mb-6">
                <p class="text-xl text-gray-700 mb-4">Encontre os pares! Tentativas: <span id="attempts" class="font-bold text-green-600">0</span></p>
                <button id="startMemoryGame" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-xl transition-all shadow-lg">
                    🎯 Começar Jogo
                </button>
            </div>
            
            <div id="memoryGrid" class="grid grid-cols-3 sm:grid-cols-4 gap-4 max-w-2xl mx-auto"></div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-600 mt-12">
            <p class="text-lg">Feito com ❤️ para crianças especiais</p>
            <p class="text-sm mt-2">Otimizado para TEA, TDAH e aprendizado multissensorial</p>
        </footer>
    </div>

    <script>
        // Estado da aplicação
        const state = {
            score: 0,
            soundEnabled: true,
            mode: 'normal', // normal, calm
            currentLetter: 'A',
            selectedConsonant: null,
            selectedVowel: null,
            memoryCards: [],
            flippedCards: [],
            matchedPairs: 0,
            attempts: 0
        };

        // Dados
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const consonants = ['B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'X', 'Z'];
        const vowels = ['A', 'E', 'I', 'O', 'U'];
        const memoryPairs = [
            { letter: 'A', emoji: '🍎', word: 'AVIÃO' },
            { letter: 'B', emoji: '🎈', word: 'BOLA' },
            { letter: 'C', emoji: '🐱', word: 'GATO' },
            { letter: 'D', emoji: '🐕', word: 'DOG' },
            { letter: 'E', emoji: '🐘', word: 'ELEFANTE' },
            { letter: 'F', emoji: '🌸', word: 'FLOR' }
        ];

        // Sons usando Speech Synthesis
        function speak(text, rate = 0.7) {
            if (!state.soundEnabled) return;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'pt-BR';
            utterance.rate = rate;
            utterance.pitch = 1.2;
            speechSynthesis.cancel();
            speechSynthesis.speak(utterance);
        }

        function playSound(type) {
            if (!state.soundEnabled) return;
            const audio = new Audio();
            if (type === 'success') {
                audio.src = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1e7bfzYIHm7A7+OZSQ==';
            } else if (type === 'click') {
                audio.src = 'data:audio/wav;base64,UklGRhIAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YU4AAAA=';
            }
            audio.play().catch(() => {});
        }

        function addScore(points) {
            state.score += points;
            document.getElementById('score').textContent = state.score;
            document.getElementById('score').parentElement.classList.add('success');
            setTimeout(() => {
                document.getElementById('score').parentElement.classList.remove('success');
            }, 500);
        }

        // Inicializar Grade de Letras
        function initLetterGrid() {
            const grid = document.getElementById('letterGrid');
            const colors = ['blue', 'green', 'yellow', 'red', 'purple', 'pink', 'indigo', 'orange', 'teal'];
            
            alphabet.forEach((letter, index) => {
                const color = colors[index % colors.length];
                const tile = document.createElement('div');
                tile.className = `letter-tile bg-${color}-100 text-${color}-800 text-3xl font-bold rounded-xl p-4 text-center`;
                tile.textContent = letter;
                tile.onclick = () => selectLetter(letter, tile);
                grid.appendChild(tile);
            });
        }

        function selectLetter(letter, element) {
            state.currentLetter = letter;
            document.getElementById('currentLetter').textContent = letter;
            document.querySelectorAll('.letter-tile').forEach(t => t.classList.remove('selected'));
            element.classList.add('selected');
            playSound('click');
            speak(letter);
            addScore(5);
        }

        // Construtor de Sílabas
        function initSyllableBuilder() {
            const consonantGrid = document.getElementById('consonantGrid');
            const vowelGrid = document.getElementById('vowelGrid');
            
            consonants.slice(0, 9).forEach(letter => {
                const tile = document.createElement('div');
                tile.className = 'bg-purple-100 text-purple-800 text-2xl font-bold rounded-lg p-3 text-center cursor-pointer hover:bg-purple-200 transition-all';
                tile.textContent = letter;
                tile.onclick = () => selectConsonant(letter, tile);
                consonantGrid.appendChild(tile);
            });
            
            vowels.forEach(letter => {
                const tile = document.createElement('div');
                tile.className = 'bg-pink-100 text-pink-800 text-2xl font-bold rounded-lg p-3 text-center cursor-pointer hover:bg-pink-200 transition-all';
                tile.textContent = letter;
                tile.onclick = () => selectVowel(letter, tile);
                vowelGrid.appendChild(tile);
            });
        }

        function selectConsonant(letter, element) {
            state.selectedConsonant = letter;
            document.querySelectorAll('#consonantGrid > div').forEach(t => t.classList.remove('selected'));
            element.classList.add('selected');
            updateSyllable();
        }

        function selectVowel(letter, element) {
            state.selectedVowel = letter;
            document.querySelectorAll('#vowelGrid > div').forEach(t => t.classList.remove('selected'));
            element.classList.add('selected');
            updateSyllable();
        }

        function updateSyllable() {
            const display = document.getElementById('syllableDisplay');
            if (state.selectedConsonant && state.selectedVowel) {
                const syllable = state.selectedConsonant + state.selectedVowel;
                display.textContent = syllable;
                speak(syllable);
                playSound('success');
                addScore(10);
            } else if (state.selectedConsonant) {
                display.textContent = state.selectedConsonant + '-';
            } else if (state.selectedVowel) {
                display.textContent = '-' + state.selectedVowel;
            } else {
                display.textContent = '--';
            }
        }

        // Jogo da Memória
        function initMemoryGame() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            state.flippedCards = [];
            state.matchedPairs = 0;
            state.attempts = 0;
            document.getElementById('attempts').textContent = '0';
            
            // Criar pares
            const cards = [];
            memoryPairs.slice(0, 6).forEach(pair => {
                cards.push({ ...pair, id: Math.random(), type: 'emoji' });
                cards.push({ ...pair, id: Math.random(), type: 'word' });
            });
            
            // Embaralhar
            cards.sort(() => Math.random() - 0.5);
            state.memoryCards = cards;
            
            // Criar cards
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'relative h-32 cursor-pointer';
                cardElement.innerHTML = `
                    <div class="card-flip w-full h-full">
                        <div class="card-front absolute w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 rounded-xl flex items-center justify-center text-4xl shadow-lg">
                            ❓
                        </div>
                        <div class="card-back absolute w-full h-full bg-white rounded-xl flex flex-col items-center justify-center text-2xl font-bold shadow-lg border-4 border-purple-300">
                            <div>${card.type === 'emoji' ? card.emoji : card.word}</div>
                        </div>
                    </div>
                `;
                cardElement.onclick = () => flipCard(index, cardElement);
                grid.appendChild(cardElement);
            });
        }

        function flipCard(index, element) {
            if (state.flippedCards.length >= 2) return;
            if (state.flippedCards.includes(index)) return;
            
            const card = element.querySelector('.card-flip');
            card.classList.add('flipped');
            state.flippedCards.push(index);
            playSound('click');
            
            if (state.flippedCards.length === 2) {
                state.attempts++;
                document.getElementById('attempts').textContent = state.attempts;
                checkMatch();
            }
        }

        function checkMatch() {
            setTimeout(() => {
                const [index1, index2] = state.flippedCards;
                const card1 = state.memoryCards[index1];
                const card2 = state.memoryCards[index2];
                
                if (card1.letter === card2.letter) {
                    playSound('success');
                    speak('Parabéns! Você encontrou um par!');
                    state.matchedPairs++;
                    addScore(20);
                    
                    if (state.matchedPairs === 6) {
                        setTimeout(() => {
                            speak('Incrível! Você completou o jogo!');
                            alert('🎉 Parabéns! Você completou o jogo da memória!');
                        }, 500);
                    }
                } else {
                    const cards = document.querySelectorAll('.card-flip');
                    cards[index1].classList.remove('flipped');
                    cards[index2].classList.remove('flipped');
                    cards[index1].classList.add('shake');
                    cards[index2].classList.add('shake');
                    setTimeout(() => {
                        cards[index1].classList.remove('shake');
                        cards[index2].classList.remove('shake');
                    }, 500);
                }
                
                state.flippedCards = [];
            }, 800);
        }

        // Event Listeners
        document.getElementById('volumeBtn').onclick = () => {
            state.soundEnabled = !state.soundEnabled;
            document.getElementById('volumeBtn').querySelector('span').textContent = state.soundEnabled ? '🔊' : '🔇';
        };

        document.getElementById('modeBtn').onclick = () => {
            state.mode = state.mode === 'normal' ? 'calm' : 'normal';
            document.getElementById('modeBtn').textContent = `Modo: ${state.mode === 'normal' ? 'Normal' : 'Calmo'}`;
            document.body.style.animation = state.mode === 'calm' ? 'none' : '';
        };

        document.getElementById('speakBtn').onclick = () => {
            speak(state.currentLetter);
        };

        document.getElementById('speakSyllable').onclick = () => {
            if (state.selectedConsonant && state.selectedVowel) {
                speak(state.selectedConsonant + state.selectedVowel);
            }
        };

        document.getElementById('clearSyllable').onclick = () => {
            state.selectedConsonant = null;
            state.selectedVowel = null;
            document.getElementById('syllableDisplay').textContent = '--';
            document.querySelectorAll('#consonantGrid > div, #vowelGrid > div').forEach(t => t.classList.remove('selected'));
        };

        document.getElementById('startMemoryGame').onclick = () => {
            initMemoryGame();
        };

        // Inicialização
        initLetterGrid();
        initSyllableBuilder();
        initMemoryGame();
        
        // Mensagem de boas-vindas
        setTimeout(() => {
            speak('Bem-vindo ao Alphabet Adventure Island! Vamos aprender juntos!');
        }, 500);
    </script>
</body>
</html>