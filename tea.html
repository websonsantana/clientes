<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alphabet Adventure Island - Plataforma Completa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(147, 51, 234, 0.5); } 50% { box-shadow: 0 0 40px rgba(147, 51, 234, 0.8); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes bounce-in { 0% { transform: scale(0); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .floating { animation: float 3s ease-in-out infinite; }
        .spin-slow { animation: spin-slow 20s linear infinite; }
        .game-card { transition: all 0.3s; cursor: pointer; }
        .game-card:hover { transform: translateY(-10px) scale(1.05); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .letter-tile { transition: all 0.3s; }
        .letter-tile:hover { transform: scale(1.15) rotate(5deg); }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); overflow-y: auto; }
        .modal.active { display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .canvas-container { background: white; touch-action: none; }
        .drawing-canvas { touch-action: none; }
        .color-option { transition: all 0.2s; }
        .color-option:hover { transform: scale(1.2); }
        .word-card { transition: all 0.3s; }
        .word-card:hover { transform: scale(1.05); }
        .number-tile { transition: all 0.3s; }
        .number-tile:hover { transform: scale(1.1) rotate(5deg); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500 text-white py-6 shadow-2xl sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <span class="text-5xl floating">üèùÔ∏è</span>
                    <div>
                        <h1 class="text-3xl font-bold">Alphabet Adventure Island</h1>
                        <p class="text-sm opacity-90">Plataforma Completa de Aprendizagem</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button id="soundToggle" class="bg-white/20 backdrop-blur p-3 rounded-full hover:bg-white/30 transition-all">
                        <span class="text-2xl">üîä</span>
                    </button>
                    <div class="bg-yellow-400 px-6 py-3 rounded-full font-bold text-yellow-900 flex items-center gap-2">
                        <span class="text-2xl">‚≠ê</span>
                        <span id="totalScore">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Navigation Tabs -->
        <div class="bg-white rounded-2xl shadow-xl p-2 mb-8 overflow-x-auto">
            <div class="flex gap-2 min-w-max">
                <button onclick="showCategory('alfabeto')" class="category-btn px-6 py-3 rounded-xl font-bold transition-all bg-purple-500 text-white">
                    üìö Alfabeto
                </button>
                <button onclick="showCategory('silabas')" class="category-btn px-6 py-3 rounded-xl font-bold transition-all hover:bg-purple-100">
                    üß© S√≠labas
                </button>
                <button onclick="showCategory('palavras')" class="category-btn px-6 py-3 rounded-xl font-bold transition-all hover:bg-purple-100">
                    üìñ Palavras
                </button>
                <button onclick="showCategory('numeros')" class="category-btn px-6 py-3 rounded-xl font-bold transition-all hover:bg-purple-100">
                    üî¢ N√∫meros
                </button>
                <button onclick="showCategory('jogos')" class="category-btn px-6 py-3 rounded-xl font-bold transition-all hover:bg-purple-100">
                    üéÆ Jogos
                </button>
                <button onclick="showCategory('arte')" class="category-btn px-6 py-3 rounded-xl font-bold transition-all hover:bg-purple-100">
                    üé® Arte
                </button>
            </div>
        </div>

        <!-- Games Grid -->
        <div id="gamesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Games will be dynamically loaded here -->
        </div>
    </main>

    <!-- Universal Modal -->
    <div id="gameModal" class="modal">
        <div class="bg-white rounded-3xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 p-6 flex justify-between items-center sticky top-0 z-10">
                <h2 id="modalTitle" class="text-3xl font-bold text-white">Jogo</h2>
                <button onclick="closeModal()" class="bg-white/20 backdrop-blur p-3 rounded-full hover:bg-white/30 transition-all">
                    <span class="text-2xl text-white">‚úï</span>
                </button>
            </div>
            <div id="modalContent" class="p-8">
                <!-- Game content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Global State
        const state = {
            score: 0,
            soundEnabled: true,
            currentCategory: 'alfabeto',
            gameData: {},
            canvas: null,
            ctx: null,
            isDrawing: false,
            currentColor: '#FF6B9D',
            brushSize: 10
        };

        // Games Database - 40 atividades
        const gamesDatabase = {
            alfabeto: [
                { id: 'letter-explorer', title: 'Explorador de Letras', icon: 'üìö', desc: 'Aprenda todas as letras do alfabeto', difficulty: 1 },
                { id: 'letter-sounds', title: 'Sons das Letras', icon: 'üîä', desc: 'Ou√ßa e identifique sons', difficulty: 1 },
                { id: 'letter-tracing', title: 'Tra√ßar Letras', icon: '‚úçÔ∏è', desc: 'Pratique escrita de letras', difficulty: 2 },
                { id: 'letter-matching', title: 'Combinar Mai√∫sculas', icon: 'üî§', desc: 'Combine letras mai√∫sculas e min√∫sculas', difficulty: 2 },
                { id: 'alphabet-song', title: 'M√∫sica do Alfabeto', icon: 'üéµ', desc: 'Cante e aprenda o ABC', difficulty: 1 },
                { id: 'find-letter', title: 'Encontre a Letra', icon: 'üîç', desc: 'Procure letras escondidas', difficulty: 2 },
                { id: 'letter-order', title: 'Ordem Alfab√©tica', icon: 'üéØ', desc: 'Coloque as letras em ordem', difficulty: 3 },
                { id: 'vowel-game', title: 'Jogo das Vogais', icon: 'üÖ∞Ô∏è', desc: 'Identifique as vogais', difficulty: 1 }
            ],
            silabas: [
                { id: 'syllable-builder', title: 'Construtor de S√≠labas', icon: 'üß©', desc: 'Forme s√≠labas combinando letras', difficulty: 2 },
                { id: 'syllable-matching', title: 'Combinar S√≠labas', icon: 'üé¥', desc: 'Encontre pares de s√≠labas', difficulty: 2 },
                { id: 'syllable-sounds', title: 'Sons de S√≠labas', icon: 'üîä', desc: 'Ou√ßa e repita s√≠labas', difficulty: 2 },
                { id: 'syllable-puzzle', title: 'Quebra-Cabe√ßa Sil√°bico', icon: 'üß©', desc: 'Monte palavras com s√≠labas', difficulty: 3 },
                { id: 'syllable-family', title: 'Fam√≠lia Sil√°bica', icon: 'üë®‚Äçüë©‚Äçüëß', desc: 'Explore fam√≠lias sil√°bicas (BA, BE, BI)', difficulty: 2 },
                { id: 'syllable-race', title: 'Corrida de S√≠labas', icon: 'üèÉ', desc: 'Forme s√≠labas rapidamente', difficulty: 3 },
                { id: 'syllable-bingo', title: 'Bingo de S√≠labas', icon: 'üé∞', desc: 'Jogue bingo com s√≠labas', difficulty: 2 },
                { id: 'syllable-hunt', title: 'Ca√ßa S√≠labas', icon: 'üéØ', desc: 'Encontre s√≠labas espec√≠ficas', difficulty: 2 }
            ],
            palavras: [
                { id: 'word-builder', title: 'Construtor de Palavras', icon: 'üìù', desc: 'Monte palavras completas', difficulty: 3 },
                { id: 'word-images', title: 'Palavra e Imagem', icon: 'üñºÔ∏è', desc: 'Associe palavras a imagens', difficulty: 2 },
                { id: 'word-scramble', title: 'Embaralhar Palavras', icon: 'üîÄ', desc: 'Desembaralhe as letras', difficulty: 3 },
                { id: 'word-categories', title: 'Categorias', icon: 'üóÇÔ∏è', desc: 'Classifique palavras por categoria', difficulty: 3 },
                { id: 'rhyme-time', title: 'Hora da Rima', icon: 'üé≠', desc: 'Encontre palavras que rimam', difficulty: 3 },
                { id: 'word-search', title: 'Ca√ßa-Palavras', icon: 'üîç', desc: 'Encontre palavras escondidas', difficulty: 3 },
                { id: 'word-spelling', title: 'Soletrar Palavras', icon: 'üé§', desc: 'Soletre palavras corretamente', difficulty: 3 },
                { id: 'word-opposites', title: 'Opostos', icon: '‚ÜîÔ∏è', desc: 'Encontre palavras opostas', difficulty: 4 }
            ],
            numeros: [
                { id: 'number-explorer', title: 'Explorador de N√∫meros', icon: 'üî¢', desc: 'Aprenda n√∫meros de 0 a 100', difficulty: 1 },
                { id: 'counting-game', title: 'Jogo de Contar', icon: 'üßÆ', desc: 'Conte objetos', difficulty: 1 },
                { id: 'number-tracing', title: 'Tra√ßar N√∫meros', icon: '‚úçÔ∏è', desc: 'Pratique escrita de n√∫meros', difficulty: 2 },
                { id: 'number-matching', title: 'Combinar N√∫meros', icon: 'üéØ', desc: 'Combine n√∫meros e quantidades', difficulty: 2 },
                { id: 'math-basics', title: 'Matem√°tica B√°sica', icon: '‚ûï', desc: 'Adi√ß√£o e subtra√ß√£o simples', difficulty: 3 },
                { id: 'number-order', title: 'Ordem Num√©rica', icon: 'üìä', desc: 'Coloque n√∫meros em ordem', difficulty: 2 },
                { id: 'skip-counting', title: 'Contar Pulando', icon: 'ü¶ò', desc: 'Conte de 2 em 2, 5 em 5', difficulty: 3 },
                { id: 'number-patterns', title: 'Padr√µes Num√©ricos', icon: 'üî¢', desc: 'Complete sequ√™ncias', difficulty: 3 }
            ],
            jogos: [
                { id: 'memory-game', title: 'Jogo da Mem√≥ria', icon: 'üß†', desc: 'Encontre pares correspondentes', difficulty: 2 },
                { id: 'simon-says', title: 'Sim√£o Diz', icon: 'üëÇ', desc: 'Siga as instru√ß√µes', difficulty: 2 },
                { id: 'treasure-hunt', title: 'Ca√ßa ao Tesouro', icon: 'üíé', desc: 'Encontre tesouros escondidos', difficulty: 2 },
                { id: 'quiz-master', title: 'Quiz do Mestre', icon: '‚ùì', desc: 'Responda perguntas', difficulty: 3 },
                { id: 'speed-challenge', title: 'Desafio de Velocidade', icon: '‚ö°', desc: 'Complete tarefas rapidamente', difficulty: 3 },
                { id: 'puzzle-master', title: 'Mestre dos Puzzles', icon: 'üß©', desc: 'Monte quebra-cabe√ßas', difficulty: 3 },
                { id: 'color-match', title: 'Combinar Cores', icon: 'üé®', desc: 'Encontre cores correspondentes', difficulty: 1 },
                { id: 'shape-sorter', title: 'Classificador de Formas', icon: '‚¨õ', desc: 'Classifique formas', difficulty: 2 }
            ],
            arte: [
                { id: 'free-draw', title: 'Desenho Livre', icon: 'üé®', desc: 'Desenhe livremente', difficulty: 1 },
                { id: 'color-by-number', title: 'Colorir por N√∫meros', icon: 'üñçÔ∏è', desc: 'Pinte seguindo n√∫meros', difficulty: 2 },
                { id: 'pattern-maker', title: 'Criador de Padr√µes', icon: 'üî≤', desc: 'Crie padr√µes art√≠sticos', difficulty: 2 },
                { id: 'stamp-art', title: 'Arte de Carimbos', icon: 'üñºÔ∏è', desc: 'Use carimbos para criar arte', difficulty: 1 },
                { id: 'coloring-book', title: 'Livro de Colorir', icon: 'üìö', desc: 'Pinte desenhos prontos', difficulty: 1 },
                { id: 'sticker-scene', title: 'Cen√°rio de Adesivos', icon: '‚ú®', desc: 'Crie cenas com adesivos', difficulty: 1 },
                { id: 'paint-splatter', title: 'Respingos de Tinta', icon: 'üí¶', desc: 'Arte abstrata divertida', difficulty: 1 },
                { id: 'doodle-master', title: 'Mestre do Rabisco', icon: '‚úèÔ∏è', desc: 'Rabisque criativamente', difficulty: 1 }
            ]
        };

        // Initialize
        function init() {
            loadGames('alfabeto');
            updateScore(0);
        }

        // Show Category
        function showCategory(category) {
            state.currentCategory = category;
            
            // Update button styles
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('bg-purple-500', 'text-white');
                btn.classList.add('hover:bg-purple-100');
            });
            event.target.classList.add('bg-purple-500', 'text-white');
            event.target.classList.remove('hover:bg-purple-100');
            
            loadGames(category);
        }

        // Load Games
        function loadGames(category) {
            const container = document.getElementById('gamesContainer');
            const games = gamesDatabase[category];
            
            container.innerHTML = games.map(game => `
                <div class="game-card bg-white rounded-2xl shadow-lg p-6" onclick="openGame('${game.id}', '${category}')">
                    <div class="text-6xl text-center mb-4">${game.icon}</div>
                    <h3 class="text-xl font-bold text-purple-800 mb-2 text-center">${game.title}</h3>
                    <p class="text-gray-600 text-sm text-center mb-4">${game.desc}</p>
                    <div class="flex justify-center gap-1">
                        ${Array(game.difficulty).fill('‚≠ê').join('')}
                    </div>
                    <button class="mt-4 w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 rounded-xl hover:shadow-lg transition-all">
                        Jogar Agora
                    </button>
                </div>
            `).join('');
        }

        // Open Game Modal
        function openGame(gameId, category) {
            const modal = document.getElementById('gameModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            const game = gamesDatabase[category].find(g => g.id === gameId);
            title.textContent = game.icon + ' ' + game.title;
            
            // Load game content based on ID
            content.innerHTML = getGameContent(gameId, category);
            
            modal.classList.add('active');
            
            // Initialize game-specific logic
            setTimeout(() => initGame(gameId), 100);
        }

        // Close Modal
        function closeModal() {
            const modal = document.getElementById('gameModal');
            modal.classList.remove('active');
            if (state.ctx) {
                state.ctx.clearRect(0, 0, state.canvas.width, state.canvas.height);
            }
        }

        // Get Game Content
        function getGameContent(gameId, category) {
            const contentMap = {
                'letter-explorer': getLetterExplorer(),
                'syllable-builder': getSyllableBuilder(),
                'memory-game': getMemoryGame(),
                'word-images': getWordImages(),
                'number-explorer': getNumberExplorer(),
                'free-draw': getFreeDrawCanvas(),
                'letter-tracing': getLetterTracing(),
                'counting-game': getCountingGame(),
                'word-builder': getWordBuilder(),
                'color-match': getColorMatch()
            };
            
            return contentMap[gameId] || getDefaultGame(gameId);
        }

        // Game Content Templates
        function getLetterExplorer() {
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
            return `
                <div class="text-center mb-8">
                    <div id="bigLetter" class="inline-block bg-gradient-to-br from-blue-400 to-purple-500 text-white text-9xl font-bold rounded-3xl p-12 shadow-2xl">
                        A
                    </div>
                    <button onclick="speakLetter()" class="block mx-auto mt-6 bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-full text-xl">
                        üîä Falar Letra
                    </button>
                </div>
                <div class="grid grid-cols-6 sm:grid-cols-9 gap-3">
                    ${alphabet.map((letter, i) => {
                        const colors = ['blue', 'green', 'yellow', 'red', 'purple', 'pink', 'indigo', 'orange', 'teal'];
                        const color = colors[i % colors.length];
                        return `<div class="letter-tile bg-${color}-100 text-${color}-800 text-3xl font-bold rounded-xl p-4 text-center cursor-pointer hover:bg-${color}-200" onclick="selectLetter('${letter}')">${letter}</div>`;
                    }).join('')}
                </div>
            `;
        }

        function getSyllableBuilder() {
            const consonants = ['B', 'C', 'D', 'F', 'G', 'H', 'J', 'L', 'M', 'N', 'P', 'R', 'S', 'T', 'V'];
            const vowels = ['A', 'E', 'I', 'O', 'U'];
            return `
                <div class="text-center mb-8">
                    <div id="syllableDisplay" class="inline-block bg-gradient-to-br from-purple-400 to-pink-500 text-white text-8xl font-bold rounded-3xl p-12 shadow-2xl min-w-[200px]">
                        --
                    </div>
                    <button onclick="speakSyllable()" class="block mx-auto mt-6 bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full">
                        üîä Falar S√≠laba
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-8 max-w-2xl mx-auto">
                    <div>
                        <h3 class="text-center font-bold text-2xl text-purple-700 mb-4">Consoantes</h3>
                        <div class="grid grid-cols-3 gap-3">
                            ${consonants.map(c => `<div class="syllable-btn bg-purple-100 text-purple-800 text-3xl font-bold rounded-xl p-4 text-center cursor-pointer hover:bg-purple-200" onclick="selectConsonant('${c}')">${c}</div>`).join('')}
                        </div>
                    </div>
                    <div>
                        <h3 class="text-center font-bold text-2xl text-pink-700 mb-4">Vogais</h3>
                        <div class="grid grid-cols-3 gap-3">
                            ${vowels.map(v => `<div class="syllable-btn bg-pink-100 text-pink-800 text-3xl font-bold rounded-xl p-4 text-center cursor-pointer hover:bg-pink-200" onclick="selectVowel('${v}')">${v}</div>`).join('')}
                        </div>
                    </div>
                </div>
                <button onclick="clearSyllable()" class="block mx-auto mt-8 bg-red-400 hover:bg-red-500 text-white font-bold py-3 px-8 rounded-full">
                    üîÑ Limpar
                </button>
            `;
        }

        function getMemoryGame() {
            const pairs = [
                { emoji: 'üçé', word: 'MA√á√É' },
                { emoji: 'üéà', word: 'BAL√ÉO' },
                { emoji: 'üê±', word: 'GATO' },
                { emoji: 'üå∏', word: 'FLOR' },
                { emoji: '‚öΩ', word: 'BOLA' },
         