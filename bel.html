<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#4CAF50">
<title>FitTrack - Seu App de Treino</title>

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

:root {
  --primary-color: #4CAF50;
  --secondary-color: #2196F3;
  --accent-color: #FF9800;
  --danger-color: #F44336;
  --dark-bg: #1a1a2e;
  --card-bg: #16213e;
  --text-primary: #ffffff;
  --text-secondary: #b8b8b8;
  --border-color: #2d3561;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background: var(--dark-bg);
  color: var(--text-primary);
  overflow-x: hidden;
  padding-bottom: 70px;
  -webkit-font-smoothing: antialiased;
}

/* App Container */
.app-container {
  max-width: 480px;
  margin: 0 auto;
  position: relative;
  min-height: 100vh;
  background: var(--dark-bg);
}

/* Header fixo */
.app-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, var(--primary-color), #45a049);
  padding: 15px 20px;
  z-index: 100;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  max-width: 480px;
  margin: 0 auto;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.header-title {
  font-size: 1.4em;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-user {
  font-size: 0.85em;
  opacity: 0.95;
  font-weight: 500;
}

.menu-btn {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-size: 1.5em;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Content area */
.app-content {
  padding: 80px 0 80px 0;
  max-width: 480px;
  margin: 0 auto;
}

.page {
  display: none;
  animation: fadeInUp 0.3s ease;
  padding: 0 15px;
}

.page.active {
  display: block;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Welcome Screen */
.welcome-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, var(--primary-color), #2e7d32);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 30px;
  z-index: 1000;
  text-align: center;
}

.welcome-logo {
  font-size: 5em;
  margin-bottom: 20px;
  animation: bounce 1s ease infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.welcome-screen h1 {
  font-size: 2em;
  margin-bottom: 10px;
}

.welcome-screen p {
  font-size: 1.1em;
  opacity: 0.9;
  margin-bottom: 40px;
}

/* Cards */
.card {
  background: var(--card-bg);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  border: 1px solid var(--border-color);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.card-title {
  font-size: 1.2em;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.card-action {
  background: transparent;
  border: none;
  color: var(--primary-color);
  font-size: 1.5em;
  cursor: pointer;
  padding: 5px;
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 20px;
}

.stat-card {
  background: linear-gradient(135deg, var(--secondary-color), #1565c0);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.stat-card.primary {
  background: linear-gradient(135deg, var(--primary-color), #2e7d32);
}

.stat-card.accent {
  background: linear-gradient(135deg, var(--accent-color), #e65100);
}

.stat-label {
  font-size: 0.75em;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.9;
  margin-bottom: 8px;
}

.stat-value {
  font-size: 2em;
  font-weight: 700;
}

/* Profile Card */
.profile-card {
  background: linear-gradient(135deg, var(--primary-color), #2e7d32);
  border-radius: 20px;
  padding: 25px;
  margin-bottom: 20px;
  text-align: center;
  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
}

.profile-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: rgba(255,255,255,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3em;
  margin: 0 auto 15px;
  border: 4px solid rgba(255,255,255,0.5);
}

.profile-name {
  font-size: 1.5em;
  font-weight: 700;
  margin-bottom: 5px;
}

.profile-info {
  font-size: 0.9em;
  opacity: 0.9;
}

/* Buttons */
.btn {
  width: 100%;
  padding: 16px;
  border: none;
  border-radius: 12px;
  font-size: 1em;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 12px;
}

.btn:active {
  transform: scale(0.98);
}

.btn-primary {
  background: var(--primary-color);
  color: white;
  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
}

.btn-secondary {
  background: var(--secondary-color);
  color: white;
  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
}

.btn-accent {
  background: var(--accent-color);
  color: white;
  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
}

.btn-outline {
  background: transparent;
  border: 2px solid var(--primary-color);
  color: var(--primary-color);
}

.btn-small {
  padding: 10px 16px;
  font-size: 0.9em;
  width: auto;
  display: inline-flex;
}

/* Forms */
.form-group {
  margin-bottom: 20px;
}

.form-label {
  display: block;
  margin-bottom: 8px;
  font-size: 0.9em;
  font-weight: 600;
  color: var(--text-secondary);
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 14px;
  background: rgba(255,255,255,0.05);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  color: white;
  font-size: 1em;
  transition: border-color 0.3s ease;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  outline: none;
  border-color: var(--primary-color);
  background: rgba(255,255,255,0.08);
}

.form-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.form-row-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

/* Treino Card */
.treino-card {
  background: var(--card-bg);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 15px;
  border: 2px solid var(--border-color);
}

.treino-card.hoje {
  background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(46, 125, 50, 0.2));
  border-color: var(--primary-color);
  box-shadow: 0 0 20px rgba(76, 175, 80, 0.3);
}

.treino-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border-color);
}

.treino-dia {
  font-size: 0.85em;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.treino-nome {
  font-size: 1.2em;
  font-weight: 700;
  margin: 5px 0;
}

.badge {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.75em;
  font-weight: 600;
  text-transform: uppercase;
}

.badge-hoje {
  background: var(--primary-color);
  color: white;
}

.badge-descanso {
  background: var(--accent-color);
  color: white;
}

/* Exerc√≠cio Item */
.exercicio-item {
  background: rgba(255,255,255,0.03);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 10px;
  border-left: 4px solid var(--primary-color);
}

.exercicio-nome {
  font-size: 1em;
  font-weight: 600;
  margin-bottom: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.exercicio-detalhes {
  display: flex;
  gap: 15px;
  font-size: 0.85em;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.exercicio-detalhes span {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Modal */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.9);
  z-index: 1000;
  display: none;
  overflow-y: auto;
  padding: 20px;
}

.modal.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-content {
  background: var(--card-bg);
  border-radius: 20px;
  max-width: 440px;
  margin: 20px auto;
  position: relative;
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from { transform: translateY(50px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.modal-header {
  background: linear-gradient(135deg, var(--primary-color), #2e7d32);
  padding: 20px;
  border-radius: 20px 20px 0 0;
  position: relative;
}

.modal-close {
  position: absolute;
  top: 15px;
  right: 15px;
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  font-size: 1.5em;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-body {
  padding: 20px;
}

/* Avatar Container */
.avatar-container {
  background: linear-gradient(135deg, #1a1a2e, #0f0f1e);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  position: relative;
  overflow: hidden;
}

.avatar-container::before {
  content: '';
  position: absolute;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(76, 175, 80, 0.1) 0%, transparent 70%);
  animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.1); opacity: 0.8; }
}

/* Instru√ß√µes */
.instrucoes-box {
  background: rgba(33, 150, 243, 0.1);
  border-left: 4px solid var(--secondary-color);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 15px;
}

.instrucoes-box h4 {
  color: var(--secondary-color);
  margin-bottom: 12px;
  font-size: 1em;
}

.instrucoes-box ol {
  padding-left: 20px;
  line-height: 1.7;
}

.instrucoes-box li {
  margin-bottom: 8px;
  color: var(--text-secondary);
}

.dicas-box {
  background: rgba(255, 152, 0, 0.1);
  border-left: 4px solid var(--accent-color);
  border-radius: 12px;
  padding: 15px;
}

.dicas-box h4 {
  color: var(--accent-color);
  margin-bottom: 12px;
  font-size: 1em;
}

.dicas-box ul {
  padding-left: 20px;
  line-height: 1.7;
}

.dicas-box li {
  margin-bottom: 8px;
  color: var(--text-secondary);
}

.musculos-tag {
  display: inline-block;
  background: rgba(76, 175, 80, 0.2);
  color: var(--primary-color);
  padding: 8px 12px;
  border-radius: 20px;
  font-size: 0.85em;
  margin: 5px 5px 5px 0;
  font-weight: 600;
}

/* Timeline */
.timeline {
  position: relative;
  padding: 20px 0;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 30px;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
}

.timeline-item {
  position: relative;
  padding-left: 70px;
  margin-bottom: 30px;
}

.timeline-dot {
  position: absolute;
  left: 22px;
  top: 5px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--primary-color);
  border: 3px solid var(--dark-bg);
  box-shadow: 0 0 0 3px var(--primary-color);
}

.timeline-content {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 15px;
  border: 1px solid var(--border-color);
}

.timeline-date {
  font-size: 0.75em;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 5px;
}

.timeline-title {
  font-size: 1.1em;
  font-weight: 600;
  margin-bottom: 5px;
}

/* Hist√≥rico Medi√ß√µes */
.medicao-resumo {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 12px;
  border: 1px solid var(--border-color);
}

.medicao-data {
  font-size: 0.85em;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.medicao-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.medicao-item {
  text-align: center;
}

.medicao-label {
  font-size: 0.75em;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.medicao-valor {
  font-size: 1.2em;
  font-weight: 700;
  color: var(--primary-color);
}

/* Bottom Navigation */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--card-bg);
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  z-index: 100;
  max-width: 480px;
  margin: 0 auto;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
}

.nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 8px 0;
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  background: transparent;
  color: var(--text-secondary);
}

.nav-item.active {
  color: var(--primary-color);
}

.nav-icon {
  font-size: 1.5em;
  margin-bottom: 4px;
  transition: transform 0.3s ease;
}

.nav-item.active .nav-icon {
  transform: scale(1.1);
}

.nav-label {
  font-size: 0.7em;
  font-weight: 600;
  letter-spacing: 0.3px;
}

/* Section Header */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 2px solid var(--border-color);
}

.section-title {
  font-size: 1.5em;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 60px 20px;
}

.empty-icon {
  font-size: 4em;
  margin-bottom: 15px;
  opacity: 0.3;
}

.empty-text {
  color: var(--text-secondary);
  font-size: 1.1em;
}

/* Loading */
.loading {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(76, 175, 80, 0.2);
  border-top-color: var(--primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Animations */
@keyframes shoulderPress {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-25px); }
}

@keyframes pulldown {
  0%, 100% { transform: translateY(-15px); }
  50% { transform: translateY(15px); }
}

@keyframes squat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(35px); }
}

@keyframes pushup {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(8px) rotate(1deg); }
}

/* Toast Notification */
.toast {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--primary-color);
  color: white;
  padding: 15px 25px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  z-index: 1001;
  display: none;
  animation: slideDown 0.3s ease;
  max-width: 90%;
}

.toast.show {
  display: block;
}

@keyframes slideDown {
  from { transform: translate(-50%, -100px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}

/* Swipe Actions */
.swipe-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.swipe-btn {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 8px;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

/* Pull to Refresh Indicator */
.pull-refresh {
  text-align: center;
  padding: 10px;
  color: var(--text-secondary);
  font-size: 0.9em;
  display: none;
}

/* Responsive ajustes */
@media (max-width: 360px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .nav-label {
    font-size: 0.65em;
  }
}

/* Hide scrollbar mas manter funcionalidade */
::-webkit-scrollbar {
  width: 0px;
  background: transparent;
}

/* Evitar zoom no iOS */
input, select, textarea {
  font-size: 16px !important;
}
</style>
</head>

<body>

<div class="app-container">

<!-- Welcome Screen -->
<div id="welcomeScreen" class="welcome-screen">
  <div class="welcome-logo">üí™</div>
  <h1>FitTrack</h1>
  <p>Seu parceiro fitness no bolso</p>
  <button class="btn btn-primary" onclick="mostrarCadastro()">üöÄ Come√ßar Agora</button>
  <button class="btn btn-outline" onclick="verificarUsuario()">J√° tenho conta</button>
</div>

<!-- App Header -->
<header class="app-header" id="appHeader" style="display: none;">
  <div class="header-content">
    <div>
      <div class="header-title">üí™ FitTrack</div>
      <div class="header-user" id="headerUser"></div>
    </div>
    <button class="menu-btn" onclick="abrirMenu()">‚ãÆ</button>
  </div>
</header>

<!-- Main Content -->
<div class="app-content" id="appContent" style="display: none;">
  
  <!-- P√°gina: Home -->
  <div id="homePage" class="page active">
    <div class="profile-card">
      <div class="profile-avatar" id="homeAvatar">üë§</div>
      <div class="profile-name" id="homeName">Carregando...</div>
      <div class="profile-info" id="homeInfo"></div>
    </div>
    
    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-label">Treinos/M√™s</div>
        <div class="stat-value" id="statTreinosMes">0</div>
      </div>
      <div class="stat-card secondary">
        <div class="stat-label">Medi√ß√µes</div>
        <div class="stat-value" id="statMedicoes">0</div>
      </div>
      <div class="stat-card accent">
        <div class="stat-label">Peso Atual</div>
        <div class="stat-value" id="statPeso">-</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">IMC</div>
        <div class="stat-value" id="statIMC">-</div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <div class="card-title">üèãÔ∏è Treino de Hoje</div>
      </div>
      <div id="treinoHojeCard"></div>
    </div>
    
    <button class="btn btn-primary" onclick="navegarPara('treinos')">
      Ver Todos os Treinos ‚Üí
    </button>
  </div>
  
  <!-- P√°gina: Treinos -->
  <div id="treinosPage" class="page">
    <div class="section-header">
      <div class="section-title">üèãÔ∏è Meus Treinos</div>
    </div>
    <div id="treinosContainer"></div>
  </div>
  
  <!-- P√°gina: Medi√ß√µes -->
  <div id="medicoesPage" class="page">
    <div class="section-header">
      <div class="section-title">üìä Medi√ß√µes</div>
      <button class="btn btn-small btn-primary" onclick="abrirFormMedicao()">
        ‚ûï Nova
      </button>
    </div>
    <div id="medicoesContainer"></div>
  </div>
  
  <!-- P√°gina: Timeline -->
  <div id="timelinePage" class="page">
    <div class="section-header">
      <div class="section-title">üìÖ Minha Jornada</div>
    </div>
    <div class="timeline" id="timelineContainer"></div>
  </div>
  
  <!-- P√°gina: Perfil -->
  <div id="perfilPage" class="page">
    <div class="profile-card">
      <div class="profile-avatar" id="perfilAvatar">üë§</div>
      <div class="profile-name" id="perfilName">-</div>
      <div class="profile-info" id="perfilInfo">-</div>
    </div>
    
    <div class="card">
      <div class="card-title">‚öôÔ∏è Configura√ß√µes</div>
      <button class="btn btn-secondary" onclick="abrirFormCadastro()">
        ‚úèÔ∏è Editar Perfil
      </button>
      <button class="btn btn-accent" onclick="exportarDados()">
        üíæ Exportar Dados
      </button>
      <button class="btn btn-outline" onclick="limparDados()">
        üóëÔ∏è Limpar Todos os Dados
      </button>
    </div>
  </div>
  
</div>

<!-- Bottom Navigation -->
<nav class="bottom-nav" id="bottomNav" style="display: none;">
  <button class="nav-item active" onclick="navegarPara('home')">
    <div class="nav-icon">üè†</div>
    <div class="nav-label">Home</div>
  </button>
  <button class="nav-item" onclick="navegarPara('treinos')">
    <div class="nav-icon">üèãÔ∏è</div>
    <div class="nav-label">Treinos</div>
  </button>
  <button class="nav-item" onclick="navegarPara('medicoes')">
    <div class="nav-icon">üìä</div>
    <div class="nav-label">Medi√ß√µes</div>
  </button>
  <button class="nav-item" onclick="navegarPara('timeline')">
    <div class="nav-icon">üìÖ</div>
    <div class="nav-label">Timeline</div>
  </button>
  <button class="nav-item" onclick="navegarPara('perfil')">
    <div class="nav-icon">üë§</div>
    <div class="nav-label">Perfil</div>
  </button>
</nav>

<!-- Modal: Exerc√≠cio -->
<div id="exerciseModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modalExerciseName" style="padding-right: 40px;"></h2>
      <button class="modal-close" onclick="fecharModal('exerciseModal')">√ó</button>
    </div>
    <div class="modal-body">
      <div class="avatar-container" id="avatarContainer"></div>
      
      <div style="display: flex; gap: 10px; margin-bottom: 20px;">
        <div class="stat-card" style="flex: 1; padding: 12px;">
          <div class="stat-label" style="font-size: 0.7em;">S√©ries</div>
          <div class="stat-value" style="font-size: 1.5em;" id="modalSets"></div>
        </div>
        <div class="stat-card" style="flex: 1; padding: 12px;">
          <div class="stat-label" style="font-size: 0.7em;">Reps</div>
          <div class="stat-value" style="font-size: 1.5em;" id="modalReps"></div>
        </div>
        <div class="stat-card" style="flex: 1; padding: 12px;">
          <div class="stat-label" style="font-size: 0.7em;">Descanso</div>
          <div class="stat-value" style="font-size: 1.5em;" id="modalRest"></div>
        </div>
      </div>
      
      <div id="modalMusculos" style="margin-bottom: 15px;"></div>
      
      <div class="instrucoes-box">
        <h4>üìù Como Executar</h4>
        <div id="modalInstructions"></div>
      </div>
      
      <div class="dicas-box">
        <h4>‚ö†Ô∏è Dicas Importantes</h4>
        <div id="modalTips"></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Formul√°rio de Cadastro -->
<div id="cadastroModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>üìã Meu Perfil</h2>
      <button class="modal-close" onclick="fecharModal('cadastroModal')">√ó</button>
    </div>
    <div class="modal-body">
      <form id="formCadastro" onsubmit="salvarCadastro(event)">
        <div class="form-group">
          <label class="form-label">Nome Completo *</label>
          <input type="text" class="form-input" id="nome" required placeholder="Seu nome">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Nascimento *</label>
            <input type="date" class="form-input" id="dataNascimento" required>
          </div>
          <div class="form-group">
            <label class="form-label">Sexo *</label>
            <select class="form-select" id="sexo" required>
              <option value="">Selecione</option>
              <option value="M">Masculino</option>
              <option value="F">Feminino</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-input" id="email" placeholder="seu@email.com">
        </div>
        
        <div class="form-group">
          <label class="form-label">Telefone</label>
          <input type="tel" class="form-input" id="telefone" placeholder="(00) 00000-0000">
        </div>
        
        <div class="form-group">
          <label class="form-label">Objetivo</label>
          <select class="form-select" id="objetivo">
            <option value="emagrecimento">üî• Emagrecimento</option>
            <option value="hipertrofia">üí™ Ganho de Massa</option>
            <option value="condicionamento">üèÉ Condicionamento</option>
            <option value="saude">‚ù§Ô∏è Sa√∫de e Bem-estar</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">Observa√ß√µes M√©dicas</label>
          <textarea class="form-textarea" id="observacoes" rows="3" placeholder="Les√µes, restri√ß√µes..."></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary">üíæ Salvar Perfil</button>
      </form>
    </div>
  </div>
</div>

<!-- Modal: Nova Medi√ß√£o -->
<div id="medicaoModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>üìè Nova Medi√ß√£o</h2>
      <button class="modal-close" onclick="fecharModal('medicaoModal')">√ó</button>
    </div>
    <div class="modal-body">
      <form id="formMedicao" onsubmit="salvarMedicao(event)">
        <div class="form-group">
          <label class="form-label">Data *</label>
          <input type="date" class="form-input" id="dataMedicao" required>
        </div>
        
        <div class="form-row-3">
          <div class="form-group">
            <label class="form-label">Peso (kg) *</label>
            <input type="number" step="0.1" class="form-input" id="peso" required>
          </div>
          <div class="form-group">
            <label class="form-label">Altura (m) *</label>
            <input type="number" step="0.01" class="form-input" id="altura" required>
          </div>
          <div class="form-group">
            <label class="form-label">% Gordura</label>
            <input type="number" step="0.1" class="form-input" id="gordura">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">% Massa Muscular</label>
            <input type="number" step="0.1" class="form-input" id="massaMuscular">
          </div>
          <div class="form-group">
            <label class="form-label">Metabolismo</label>
            <input type="number" class="form-input" id="metabolismo">
          </div>
        </div>
        
        <h4 style="margin: 20px 0 10px; color: var(--text-secondary); font-size: 0.9em;">Medidas Corporais (cm)</h4>
        
        <div class="form-row-3">
          <div class="form-group">
            <label class="form-label">Pesco√ßo</label>
            <input type="number" step="0.1" class="form-input" id="pescoco">
          </div>
          <div class="form-group">
            <label class="form-label">Ombros</label>
            <input type="number" step="0.1" class="form-input" id="ombros">
          </div>
          <div class="form-group">
            <label class="form-label">Peitoral</label>
            <input type="number" step="0.1" class="form-input" id="peitoral">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Bra√ßo Esq</label>
            <input type="number" step="0.1" class="form-input" id="bracoEsq">
          </div>
          <div class="form-group">
            <label class="form-label">Bra√ßo Dir</label>
            <input type="number" step="0.1" class="form-input" id="bracoDir">
          </div>
        </div>
        
        <div class="form-row-3">
          <div class="form-group">
            <label class="form-label">Cintura</label>
            <input type="number" step="0.1" class="form-input" id="cintura">
          </div>
          <div class="form-group">
            <label class="form-label">Abd√¥men</label>
            <input type="number" step="0.1" class="form-input" id="abdomen">
          </div>
          <div class="form-group">
            <label class="form-label">Quadril</label>
            <input type="number" step="0.1" class="form-input" id="quadril">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Coxa Esq</label>
            <input type="number" step="0.1" class="form-input" id="coxaEsq">
          </div>
          <div class="form-group">
            <label class="form-label">Coxa Dir</label>
            <input type="number" step="0.1" class="form-input" id="coxaDir">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Panturrilha Esq</label>
            <input type="number" step="0.1" class="form-input" id="panturrilhaEsq">
          </div>
          <div class="form-group">
            <label class="form-label">Panturrilha Dir</label>
            <input type="number" step="0.1" class="form-input" id="panturrilhaDir">
          </div>
        </div>
        
        <button type="submit" class="btn btn-primary">üíæ Salvar Medi√ß√£o</button>
      </form>
    </div>
  </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>

</div>

<script>
// Banco de dados de exerc√≠cios
const exerciciosDB = {
  'Desenvolvimento com barra': {
    instrucoes: [
      'Sente-se em um banco com apoio para as costas',
      'Pegue a barra com as m√£os na largura dos ombros',
      'Empurre a barra para cima at√© estender completamente os bra√ßos',
      'Des√ßa controladamente at√© a altura dos ombros',
      'Mantenha o core contra√≠do durante todo o movimento'
    ],
    dicas: [
      'N√£o arqueie as costas',
      'Mantenha os cotovelos alinhados com os pulsos',
      'Expire ao subir, inspire ao descer'
    ],
    avatar: 'shoulderPress',
    musculos: ['Ombros', 'Tr√≠ceps']
  },
  'Pulldown com barra': {
    instrucoes: [
      'Sente-se na m√°quina e ajuste a almofada nas coxas',
      'Pegue a barra com as m√£os mais abertas que os ombros',
      'Puxe a barra em dire√ß√£o ao peito, contraindo as esc√°pulas',
      'Suba controladamente at√© a extens√£o completa dos bra√ßos',
      'Mantenha o tronco ligeiramente inclinado para tr√°s'
    ],
    dicas: [
      'Foque em puxar com as costas, n√£o com os bra√ßos',
      'N√£o balance o corpo',
      'Des√ßa a barra at√© a linha dos mamilos'
    ],
    avatar: 'pulldown',
    musculos: ['Costas', 'B√≠ceps', 'Trap√©zio']
  },
  'Stiff com barra': {
    instrucoes: [
      'Fique em p√© com os p√©s na largura do quadril',
      'Segure a barra com as m√£os na frente das coxas',
      'Mantendo os joelhos levemente flexionados, incline o tronco para frente',
      'Des√ßa a barra deslizando pelas pernas at√© sentir alongamento',
      'Retorne √† posi√ß√£o inicial contraindo gl√∫teos'
    ],
    dicas: [
      'Mantenha as costas retas',
      'N√£o dobre muito os joelhos',
      'Foque em empurrar o quadril para tr√°s'
    ],
    avatar: 'squat',
    musculos: ['Posterior', 'Gl√∫teos', 'Lombar']
  },
  'Crucifixo inclinado': {
    instrucoes: [
      'Deite-se em um banco inclinado (30-45 graus)',
      'Segure os halteres acima do peito com os bra√ßos estendidos',
      'Abra os bra√ßos em arco at√© sentir alongamento no peitoral',
      'Retorne √† posi√ß√£o inicial contraindo o peitoral',
      'Mantenha uma leve flex√£o nos cotovelos'
    ],
    dicas: [
      'N√£o des√ßa muito al√©m da linha dos ombros',
      'Mantenha os p√©s firmes no ch√£o',
      'Controle o movimento na descida'
    ],
    avatar: 'pushup',
    musculos: ['Peitoral Superior', 'Ombros']
  },
  'Cadeira extensora': {
    instrucoes: [
      'Sente-se na m√°quina e ajuste o apoio dos p√©s',
      'Segure nas al√ßas laterais para estabiliza√ß√£o',
      'Estenda as pernas at√© a contra√ß√£o completa do quadr√≠ceps',
      'Retorne controladamente √† posi√ß√£o inicial',
      'Mantenha as costas apoiadas no banco'
    ],
    dicas: [
      'N√£o trave os joelhos no topo',
      'Evite movimentos bruscos',
      'Contraia o quadr√≠ceps no topo por 1 segundo'
    ],
    avatar: 'squat',
    musculos: ['Quadr√≠ceps']
  },
  'Eleva√ß√£o lateral': {
    instrucoes: [
      'Fique em p√© com os p√©s na largura dos ombros',
      'Segure um halter em cada m√£o ao lado do corpo',
      'Eleve os bra√ßos lateralmente at√© a altura dos ombros',
      'Des√ßa controladamente at√© a posi√ß√£o inicial',
      'Mantenha uma leve flex√£o nos cotovelos'
    ],
    dicas: [
      'N√£o balance o corpo',
      'N√£o eleve acima da linha dos ombros',
      'Lidere com os cotovelos'
    ],
    avatar: 'shoulderPress',
    musculos: ['Ombros Laterais']
  },
  'Remada baixa': {
    instrucoes: [
      'Sente-se na m√°quina com os p√©s apoiados',
      'Segure a barra/manopla com os bra√ßos estendidos',
      'Puxe em dire√ß√£o ao abd√¥men contraindo as esc√°pulas',
      'Retorne controladamente √† posi√ß√£o inicial',
      'Mantenha as costas eretas'
    ],
    dicas: [
      'N√£o arqueie as costas',
      'Puxe os cotovelos para tr√°s',
      'Mantenha o core contra√≠do'
    ],
    avatar: 'pulldown',
    musculos: ['Dorsais', 'Trap√©zio', 'B√≠ceps']
  },
  'Agachamento livre': {
    instrucoes: [
      'Posicione a barra nas costas (trap√©zio superior)',
      'P√©s na largura dos ombros, pontas levemente para fora',
      'Des√ßa flexionando joelhos e quadril simultaneamente',
      'Des√ßa at√© as coxas ficarem paralelas ao ch√£o',
      'Suba empurrando o ch√£o'
    ],
    dicas: [
      'Mantenha o peito para cima',
      'Joelhos alinhados com os p√©s',
      'Peso nos calcanhares'
    ],
    avatar: 'squat',
    musculos: ['Quadr√≠ceps', 'Gl√∫teos', 'Posterior']
  },
  'Supino reto': {
    instrucoes: [
      'Deite-se no banco com os p√©s firmes no ch√£o',
      'Segure a barra ligeiramente mais aberta que os ombros',
      'Des√ßa a barra at√© tocar o peito',
      'Empurre a barra para cima at√© extens√£o completa',
      'Mantenha as esc√°pulas retra√≠das'
    ],
    dicas: [
      'N√£o tire os gl√∫teos do banco',
      'Controle a descida da barra',
      'Mantenha os pulsos retos'
    ],
    avatar: 'pushup',
    musculos: ['Peitoral', 'Ombros', 'Tr√≠ceps']
  },
  'Leg press': {
    instrucoes: [
      'Sente-se na m√°quina com as costas bem apoiadas',
      'Posicione os p√©s na plataforma na largura dos ombros',
      'Destrave o peso e des√ßa controladamente',
      'Des√ßa at√© os joelhos formarem 90 graus',
      'Empurre a plataforma at√© quase estender as pernas'
    ],
    dicas: [
      'N√£o trave os joelhos completamente',
      'Mantenha a lombar apoiada',
      'N√£o arredonde as costas'
    ],
    avatar: 'squat',
    musculos: ['Quadr√≠ceps', 'Gl√∫teos']
  },
  'Pullover': {
    instrucoes: [
      'Deite-se no banco perpendicular (s√≥ as costas apoiadas)',
      'Segure um halter com as duas m√£os acima do peito',
      'Mantendo os bra√ßos levemente flexionados, leve o halter para tr√°s',
      'Des√ßa at√© sentir alongamento no peito e costas',
      'Retorne √† posi√ß√£o inicial'
    ],
    dicas: [
      'Mantenha o quadril baixo',
      'N√£o dobre muito os cotovelos',
      'Respire profundamente'
    ],
    avatar: 'pulldown',
    musculos: ['Grande Dorsal', 'Peitoral', 'Serr√°til']
  },
  'Flex√£o de bra√ßo': {
    instrucoes: [
      'Posicione-se em prancha com m√£os na largura dos ombros',
      'Mantenha o corpo reto da cabe√ßa aos p√©s',
      'Des√ßa o corpo flexionando os cotovelos',
      'Des√ßa at√© o peito quase tocar o ch√£o',
      'Empurre o corpo de volta √† posi√ß√£o inicial'
    ],
    dicas: [
      'Mantenha o core contra√≠do',
      'N√£o deixe o quadril cair',
      'Cotovelos pr√≥ximos ao corpo'
    ],
    avatar: 'pushup',
    musculos: ['Peitoral', 'Tr√≠ceps', 'Core']
  },
  'Cadeira flexora': {
    instrucoes: [
      'Deite-se de bru√ßos na m√°quina',
      'Ajuste o apoio nos calcanhares',
      'Flexione as pernas trazendo os calcanhares em dire√ß√£o aos gl√∫teos',
      'Contraia o posterior de coxa no topo',
      'Retorne controladamente'
    ],
    dicas: [
      'Mantenha os quadris no banco',
      'N√£o use impulso',
      'Controle a descida'
    ],
    avatar: 'squat',
    musculos: ['Posterior de Coxa', 'Panturrilhas']
  },
  'Cadeira abdutora': {
    instrucoes: [
      'Sente-se na m√°quina com as costas apoiadas',
      'Posicione as pernas nas almofadas',
      'Afaste as pernas contra a resist√™ncia',
      'Abra o m√°ximo poss√≠vel mantendo controle',
      'Retorne √† posi√ß√£o inicial'
    ],
    dicas: [
      'Mantenha as costas apoiadas',
      'Movimento controlado',
      'N√£o use impulso'
    ],
    avatar: 'squat',
    musculos: ['Gl√∫teo M√©dio', 'Abdutores']
  },
  'Cadeira adutora': {
    instrucoes: [
      'Sente-se na m√°quina com as costas apoiadas',
      'Posicione as pernas nas almofadas (abertas)',
      'Feche as pernas contra a resist√™ncia',
      'Junte completamente as pernas',
      'Retorne controladamente'
    ],
    dicas: [
      'Mantenha as costas apoiadas',
      'Movimento controlado',
      'Contraia a parte interna das coxas'
    ],
    avatar: 'squat',
    musculos: ['Adutores', 'Parte Interna da Coxa']
  }
};

// Dados dos treinos
const treinos = {
  'Segunda': {
    nome: 'Ombros e Peito',
    exercicios: [
      { metodo: 'Tradicional', exercicio: 'Desenvolvimento com barra', series: 3, reps: 10, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Eleva√ß√£o lateral', series: 3, reps: 12, descanso: '60s' },
      { metodo: 'Tradicional', exercicio: 'Supino reto', series: 3, reps: 10, descanso: '90s' }
    ]
  },
  'Ter√ßa': {
    nome: 'Costas e B√≠ceps',
    exercicios: [
      { metodo: 'Tradicional', exercicio: 'Pulldown com barra', series: 4, reps: 12, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Remada baixa', series: 3, reps: 12, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Pullover', series: 3, reps: 15, descanso: '60s' }
    ]
  },
  'Quarta': {
    nome: 'Pernas Completo',
    exercicios: [
      { metodo: 'Tradicional', exercicio: 'Agachamento livre', series: 4, reps: 10, descanso: '120s' },
      { metodo: 'Tradicional', exercicio: 'Leg press', series: 3, reps: 15, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Stiff com barra', series: 3, reps: 12, descanso: '90s' }
    ]
  },
  'Quinta': {
    nome: 'Peito e Tr√≠ceps',
    exercicios: [
      { metodo: 'Tradicional', exercicio: 'Supino reto', series: 4, reps: 10, descanso: '120s' },
      { metodo: 'Tradicional', exercicio: 'Crucifixo inclinado', series: 3, reps: 10, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Flex√£o de bra√ßo', series: 3, reps: 15, descanso: '60s' }
    ]
  },
  'Sexta': {
    nome: 'Pernas e Gl√∫teos',
    exercicios: [
      { metodo: 'Tradicional', exercicio: 'Leg press', series: 4, reps: 15, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Cadeira extensora', series: 3, reps: 15, descanso: '90s' },
      { metodo: 'Tradicional', exercicio: 'Cadeira flexora', series: 3, reps: 12, descanso: '90s' },
      { metodo: 'Bi-set', exercicio: 'Cadeira abdutora', series: 3, reps: 15, descanso: '60s' }
    ]
  },
  'S√°bado': {
    nome: 'Treino Leve ou Descanso',
    exercicios: []
  },
  'Domingo': {
    nome: 'Descanso',
    exercicios: []
  }
};

// LocalStorage helpers
function salvar(chave, dados) {
  localStorage.setItem(chave, JSON.stringify(dados));
}

function carregar(chave) {
  const dados = localStorage.getItem(chave);
  return dados ? JSON.parse(dados) : null;
}

function obterDiaSemana() {
  const dias = ['Domingo', 'Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];
  return dias[new Date().getDay()];
}

function calcularIdade(dataNascimento) {
  const hoje = new Date();
  const nascimento = new Date(dataNascimento);
  let idade = hoje.getFullYear() - nascimento.getFullYear();
  const mes = hoje.getMonth() - nascimento.getMonth();
  
  if (mes < 0 || (mes === 0 && hoje.getDate() < nascimento.getDate())) {
    idade--;
  }
  
  return idade;
}

// Toast notification
function mostrarToast(mensagem) {
  const toast = document.getElementById('toast');
  toast.textContent = mensagem;
  toast.classList.add('show');
  
  setTimeout(() => {
    toast.classList.remove('show');
  }, 3000);
}

// Navega√ß√£o
function navegarPara(pagina) {
  // Remover active de todas as p√°ginas e nav items
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  
  // Ativar p√°gina e nav item
  document.getElementById(pagina + 'Page').classList.add('active');
  
  // Ativar nav item correspondente
  const navItems = document.querySelectorAll('.nav-item');
  const pageIndex = ['home', 'treinos', 'medicoes', 'timeline', 'perfil'].indexOf(pagina);
  if (pageIndex !== -1 && navItems[pageIndex]) {
    navItems[pageIndex].classList.add('active');
  }
  
  // Carregar conte√∫do espec√≠fico
  if (pagina === 'home') {
    carregarHome();
  } else if (pagina === 'treinos') {
    carregarTreinos();
  } else if (pagina === 'medicoes') {
    carregarMedicoes();
  } else if (pagina === 'timeline') {
    carregarTimeline();
  } else if (pagina === 'perfil') {
    carregarPerfil();
  }
  
  // Scroll to top
  window.scrollTo(0, 0);
}

// Inicializa√ß√£o
function init() {
  const usuario = carregar('usuario');
  
  if (usuario) {
    document.getElementById('welcomeScreen').style.display = 'none';
    document.getElementById('appHeader').style.display = 'block';
    document.getElementById('appContent').style.display = 'block';
    document.getElementById('bottomNav').style.display = 'flex';
    
    document.getElementById('headerUser').textContent = usuario.nome.split(' ')[0];
    
    navegarPara('home');
  } else {
    document.getElementById('welcomeScreen').style.display = 'flex';
  }
}

function mostrarCadastro() {
  document.getElementById('welcomeScreen').style.display = 'none';
  document.getElementById('appHeader').style.display = 'block';
  document.getElementById('appContent').style.display = 'block';
  document.getElementById('bottomNav').style.display = 'flex';
  abrirFormCadastro();
}

function verificarUsuario() {
  const usuario = carregar('usuario');
  if (usuario) {
    init();
  } else {
    mostrarToast('‚ö†Ô∏è Nenhum cadastro encontrado');
    setTimeout(mostrarCadastro, 1000);
  }
}

// Cadastro
function abrirFormCadastro() {
  const usuario = carregar('usuario');
  if (usuario) {
    document.getElementById('nome').value = usuario.nome || '';
    document.getElementById('dataNascimento').value = usuario.dataNascimento || '';
    document.getElementById('sexo').value = usuario.sexo || '';
    document.getElementById('email').value = usuario.email || '';
    document.getElementById('telefone').value = usuario.telefone || '';
    document.getElementById('objetivo').value = usuario.objetivo || 'saude';
    document.getElementById('observacoes').value = usuario.observacoes || '';
  }
  
  document.getElementById('cadastroModal').classList.add('active');
}

function salvarCadastro(e) {
  e.preventDefault();
  
  const usuario = {
    nome: document.getElementById('nome').value,
    dataNascimento: document.getElementById('dataNascimento').value,
    sexo: document.getElementById('sexo').value,
    email: document.getElementById('email').value,
    telefone: document.getElementById('telefone').value,
    objetivo: document.getElementById('objetivo').value,
    observacoes: document.getElementById('observacoes').value,
    dataCadastro: carregar('usuario')?.dataCadastro || new Date().toISOString()
  };
  
  salvar('usuario', usuario);
  
  fecharModal('cadastroModal');
  mostrarToast('‚úÖ Perfil salvo com sucesso!');
  
  // Adicionar √† timeline se for primeiro cadastro
  const timeline = carregar('timeline') || [];
  if (timeline.length === 0) {
    adicionarEventoTimeline({
      tipo: 'cadastro',
      data: usuario.dataCadastro.split('T')[0],
      titulo: 'In√≠cio da Jornada',
      descricao: `${usuario.nome} iniciou no FitTrack!`
    });
  }
  
  init();
}

// Home
function carregarHome() {
  const usuario = carregar('usuario');
  const medicoes = carregar('medicoes') || [];
  const ultimaMedicao = medicoes[0];
  
  if (usuario) {
    const inicial = usuario.nome.charAt(0).toUpperCase();
    document.getElementById('homeAvatar').textContent = inicial;
    document.getElementById('homeName').textContent = usuario.nome.split(' ')[0];
    
    const objetivos = {
      'emagrecimento': 'üî• Emagrecimento',
      'hipertrofia': 'üí™ Ganho de Massa',
      'condicionamento': 'üèÉ Condicionamento',
      'saude': '‚ù§Ô∏è Sa√∫de'
    };
    
    document.getElementById('homeInfo').innerHTML = `
      ${calcularIdade(usuario.dataNascimento)} anos ‚Ä¢ ${objetivos[usuario.objetivo] || ''}
    `;
  }
  
  // Estat√≠sticas
  document.getElementById('statMedicoes').textContent = medicoes.length;
  
  if (ultimaMedicao) {
    document.getElementById('statPeso').textContent = ultimaMedicao.peso + 'kg';
    document.getElementById('statIMC').textContent = ultimaMedicao.imc;
  }
  
  // Treino de hoje
  const diaAtual = obterDiaSemana();
  const treinoHoje = treinos[diaAtual];
  
  let html = `
    <div style="text-align: center; margin-bottom: 10px;">
      <div class="badge badge-hoje">${diaAtual}</div>
    </div>
    <h3 style="margin-bottom: 15px; text-align: center;">${treinoHoje.nome}</h3>
  `;
  
  if (treinoHoje.exercicios.length > 0) {
    html += `<div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 10px;">
      ${treinoHoje.exercicios.length} exerc√≠cio${treinoHoje.exercicios.length > 1 ? 's' : ''} hoje
    </div>`;
    
    treinoHoje.exercicios.slice(0, 2).forEach(ex => {
      html += `
        <div class="exercicio-item" style="margin-bottom: 8px;">
          <div style="font-size: 0.9em; font-weight: 600;">${ex.exercicio}</div>
          <div style="font-size: 0.75em; color: var(--text-secondary); margin-top: 4px;">
            ${ex.series}x${ex.reps} ‚Ä¢ ${ex.descanso}
          </div>
        </div>
      `;
    });
    
    if (treinoHoje.exercicios.length > 2) {
      html += `<div style="text-align: center; margin-top: 10px; color: var(--text-secondary); font-size: 0.85em;">
        +${treinoHoje.exercicios.length - 2} exerc√≠cio${treinoHoje.exercicios.length - 2 > 1 ? 's' : ''}
      </div>`;
    }
  } else {
    html += '<div style="text-align: center; padding: 20px; font-size: 1.2em;">üéâ Dia de descanso!</div>';
  }
  
  document.getElementById('treinoHojeCard').innerHTML = html;
}

// Treinos
function carregarTreinos() {
  const diaAtual = obterDiaSemana();
  let html = '';
  
  for (const [dia, treino] of Object.entries(treinos)) {
    const ehHoje = dia === diaAtual;
    
    html += `
      <div class="treino-card ${ehHoje ? 'hoje' : ''}">
        <div class="treino-header">
          <div>
            <div class="treino-dia">${dia}</div>
            <div class="treino-nome">${treino.nome}</div>
          </div>
          ${ehHoje ? '<div class="badge badge-hoje">HOJE</div>' : ''}
        </div>
    `;
    
    if (treino.exercicios.length > 0) {
      treino.exercicios.forEach(ex => {
        html += `
          <div class="exercicio-item">
            <div class="exercicio-nome">
              <span>${ex.exercicio}</span>
              <button class="btn-small btn-primary" onclick='mostrarExercicio(${JSON.stringify(ex).replace(/'/g, "\\'")})'  style="padding: 6px 12px; font-size: 0.8em;">
                üëÅÔ∏è
              </button>
            </div>
            <div class="exercicio-detalhes">
              <span>üìä ${ex.series}x${ex.reps}</span>
              <span>‚è±Ô∏è ${ex.descanso}</span>
              <span>üí™ ${ex.metodo}</span>
            </div>
          </div>
        `;
      });
    } else {
      html += '<div style="text-align: center; padding: 20px; color: var(--text-secondary);">üéâ Dia de descanso</div>';
    }
    
    html += '</div>';
  }
  
  document.getElementById('treinosContainer').innerHTML = html;
}

// Modal de exerc√≠cio
function mostrarExercicio(exercicio) {
  const modal = document.getElementById('exerciseModal');
  const exercicioInfo = exerciciosDB[exercicio.exercicio];
  
  document.getElementById('modalExerciseName').textContent = exercicio.exercicio;
  document.getElementById('modalSets').textContent = exercicio.series;
  document.getElementById('modalReps').textContent = exercicio.reps;
  document.getElementById('modalRest').textContent = exercicio.descanso;
  
  if (exercicioInfo) {
    // M√∫sculos
    let musculosHTML = '';
    exercicioInfo.musculos.forEach(m => {
      musculosHTML += `<span class="musculos-tag">${m}</span>`;
    });
    document.getElementById('modalMusculos').innerHTML = musculosHTML;
    
    // Instru√ß√µes
    let instrucoesHTML = '<ol>';
    exercicioInfo.instrucoes.forEach(instrucao => {
      instrucoesHTML += `<li>${instrucao}</li>`;
    });
    instrucoesHTML += '</ol>';
    document.getElementById('modalInstructions').innerHTML = instrucoesHTML;
    
    // Dicas
    let dicasHTML = '<ul>';
    exercicioInfo.dicas.forEach(dica => {
      dicasHTML += `<li>${dica}</li>`;
    });
    dicasHTML += '</ul>';
    document.getElementById('modalTips').innerHTML = dicasHTML;
    
    // Avatar
    renderizarAvatar(exercicioInfo.avatar);
  } else {
    document.getElementById('modalMusculos').innerHTML = '';
    document.getElementById('modalInstructions').innerHTML = '<p>Consulte seu instrutor</p>';
    document.getElementById('modalTips').innerHTML = '<p>Informa√ß√µes n√£o dispon√≠veis</p>';
    renderizarAvatar('default');
  }
  
  modal.classList.add('active');
}

function renderizarAvatar(tipo) {
  const container = document.getElementById('avatarContainer');
  
  const avatars = {
    'shoulderPress': `
      <svg width="180" height="280" viewBox="0 0 200 300" style="animation: shoulderPress 2s ease-in-out infinite;">
        <circle cx="100" cy="30" r="20" fill="#FFD700" stroke="#333" stroke-width="2"/>
        <rect x="85" y="50" width="30" height="60" fill="#4CAF50" rx="5"/>
        <rect x="50" y="60" width="30" height="8" fill="#FFA726" rx="4"/>
        <rect x="120" y="60" width="30" height="8" fill="#FFA726" rx="4"/>
        <rect x="40" y="55" width="120" height="6" fill="#666" rx="3"/>
        <rect x="30" y="50" width="15" height="16" fill="#333" rx="2"/>
        <rect x="155" y="50" width="15" height="16" fill="#333" rx="2"/>
        <rect x="85" y="110" width="12" height="50" fill="#2196F3" rx="3"/>
        <rect x="103" y="110" width="12" height="50" fill="#2196F3" rx="3"/>
        <ellipse cx="91" cy="165" rx="8" ry="4" fill="#333"/>
        <ellipse cx="109" cy="165" rx="8" ry="4" fill="#333"/>
      </svg>
    `,
    'pulldown': `
      <svg width="180" height="280" viewBox="0 0 200 300" style="animation: pulldown 2s ease-in-out infinite;">
        <circle cx="100" cy="80" r="20" fill="#FFD700" stroke="#333" stroke-width="2"/>
        <rect x="85" y="100" width="30" height="60" fill="#4CAF50" rx="5"/>
        <line x1="100" y1="40" x2="60" y2="105" stroke="#FFA726" stroke-width="8" stroke-linecap="round"/>
        <line x1="100" y1="40" x2="140" y2="105" stroke="#FFA726" stroke-width="8" stroke-linecap="round"/>
        <rect x="40" y="35" width="120" height="6" fill="#666" rx="3"/>
        <line x1="100" y1="10" x2="100" y2="35" stroke="#999" stroke-width="2" stroke-dasharray="5,5"/>
        <rect x="70" y="160" width="15" height="40" fill="#2196F3" rx="3" transform="rotate(45 77.5 180)"/>
        <rect x="115" y="160" width="15" height="40" fill="#2196F3" rx="3" transform="rotate(-45 122.5 180)"/>
      </svg>
    `,
    'squat': `
      <svg width="180" height="280" viewBox="0 0 200 300" style="animation: squat 2s ease-in-out infinite;">
        <circle cx="100" cy="40" r="20" fill="#FFD700" stroke="#333" stroke-width="2"/>
        <rect x="85" y="60" width="30" height="70" fill="#4CAF50" rx="5"/>
        <rect x="70" y="70" width="10" height="50" fill="#FFA726" rx="3"/>
        <rect x="120" y="70" width="10" height="50" fill="#FFA726" rx="3"/>
        <rect x="50" y="55" width="100" height="8" fill="#666" rx="4"/>
        <rect x="40" y="50" width="15" height="18" fill="#333" rx="2"/>
        <rect x="145" y="50" width="15" height="18" fill="#333" rx="2"/>
        <rect x="80" y="130" width="15" height="60" fill="#2196F3" rx="3"/>
        <rect x="105" y="130" width="15" height="60" fill="#2196F3" rx="3"/>
        <ellipse cx="87.5" cy="195" rx="12" ry="6" fill="#333"/>
        <ellipse cx="112.5" cy="195" rx="12" ry="6" fill="#333"/>
      </svg>
    `,
    'pushup': `
      <svg width="180" height="280" viewBox="0 0 200 300" style="animation: pushup 2s ease-in-out infinite;">
        <circle cx="60" cy="120" r="20" fill="#FFD700" stroke="#333" stroke-width="2"/>
        <rect x="75" y="115" width="70" height="25" fill="#4CAF50" rx="5" transform="rotate(-15 110 127)"/>
        <rect x="75" y="135" width="8" height="30" fill="#FFA726" rx="3" transform="rotate(60 79 150)"/>
        <rect x="137" y="135" width="8" height="30" fill="#FFA726" rx="3" transform="rotate(-60 141 150)"/>
        <rect x="130" y="120" width="12" height="45" fill="#2196F3" rx="3" transform="rotate(-15 136 142)"/>
        <rect x="145" y="120" width="12" height="45" fill="#2196F3" rx="3" transform="rotate(-15 151 142)"/>
        <rect x="20" y="180" width="160" height="15" fill="#8D6E63" rx="3" transform="rotate(-10 100 187)"/>
      </svg>
    `,
    'default': `
      <svg width="180" height="280" viewBox="0 0 200 300">
        <circle cx="100" cy="60" r="25" fill="#FFD700" stroke="#333" stroke-width="2"/>
        <rect x="82" y="85" width="36" height="80" fill="#4CAF50" rx="5"/>
        <rect x="60" y="95" width="12" height="65" fill="#FFA726" rx="3"/>
        <rect x="128" y="95" width="12" height="65" fill="#FFA726" rx="3"/>
        <rect x="82" y="165" width="15" height="70" fill="#2196F3" rx="3"/>
        <rect x="103" y="165" width="15" height="70" fill="#2196F3" rx="3"/>
        <ellipse cx="89.5" cy="240" rx="10" ry="5" fill="#333"/>
        <ellipse cx="110.5" cy="240" rx="10" ry="5" fill="#333"/>
      </svg>
    `
  };
  
  container.innerHTML = avatars[tipo] || avatars['default'];
}

// Medi√ß√µes
function abrirFormMedicao() {
  document.getElementById('dataMedicao').value = new Date().toISOString().split('T')[0];
  
  // Preencher altura do cadastro se dispon√≠vel
  const medicoes = carregar('medicoes') || [];
  if (medicoes.length > 0) {
    document.getElementById('altura').value = medicoes[0].altura;
  }
  
  document.getElementById('medicaoModal').classList.add('active');
}

function salvarMedicao(e) {
  e.preventDefault();
  
  const medicao = {
    data: document.getElementById('dataMedicao').value,
    peso: parseFloat(document.getElementById('peso').value),
    altura: parseFloat(document.getElementById('altura').value),
    gordura: parseFloat(document.getElementById('gordura').value) || null,
    massaMuscular: parseFloat(document.getElementById('massaMuscular').value) || null,
    metabolismo: parseInt(document.getElementById('metabolismo').value) || null,
    medidas: {
      pescoco: parseFloat(document.getElementById('pescoco').value) || null,
      ombros: parseFloat(document.getElementById('ombros').value) || null,
      peitoral: parseFloat(document.getElementById('peitoral').value) || null,
      bracoEsq: parseFloat(document.getElementById('bracoEsq').value) || null,
      bracoDir: parseFloat(document.getElementById('bracoDir').value) || null,
      cintura: parseFloat(document.getElementById('cintura').value) || null,
      abdomen: parseFloat(document.getElementById('abdomen').value) || null,
      quadril: parseFloat(document.getElementById('quadril').value) || null,
      coxaEsq: parseFloat(document.getElementById('coxaEsq').value) || null,
      coxaDir: parseFloat(document.getElementById('coxaDir').value) || null,
      panturrilhaEsq: parseFloat(document.getElementById('panturrilhaEsq').value) || null,
      panturrilhaDir: parseFloat(document.getElementById('panturrilhaDir').value) || null
    },
    timestamp: new Date().toISOString()
  };
  
  medicao.imc = (medicao.peso / (medicao.altura * medicao.altura)).toFixed(1);
  
  let medicoes = carregar('medicoes') || [];
  medicoes.unshift(medicao);
  salvar('medicoes', medicoes);
  
  fecharModal('medicaoModal');
  mostrarToast('‚úÖ Medi√ß√£o salva!');
  document.getElementById('formMedicao').reset();
  
  // Adicionar √† timeline
  adicionarEventoTimeline({
    tipo: 'medicao',
    data: medicao.data,
    titulo: 'Avalia√ß√£o F√≠sica',
    descricao: `Peso: ${medicao.peso}kg ‚Ä¢ IMC: ${medicao.imc}`
  });
  
  carregarMedicoes();
  carregarHome();
}

function carregarMedicoes() {
  const medicoes = carregar('medicoes') || [];
  const container = document.getElementById('medicoesContainer');
  
  if (medicoes.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">üìä</div>
        <div class="empty-text">Nenhuma medi√ß√£o registrada</div>
        <button class="btn btn-primary" onclick="abrirFormMedicao()" style="max-width: 200px; margin: 20px auto 0;">
          ‚ûï Adicionar Primeira
        </button>
      </div>
    `;
    return;
  }
  
  let html = '';
  medicoes.forEach(med => {
    html += `
      <div class="medicao-resumo">
        <div class="medicao-data">üìÖ ${new Date(med.data + 'T00:00:00').toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</div>
        <div class="medicao-grid">
          <div class="medicao-item">
            <div class="medicao-label">Peso</div>
            <div class="medicao-valor">${med.peso}kg</div>
          </div>
          <div class="medicao-item">
            <div class="medicao-label">IMC</div>
            <div class="medicao-valor">${med.imc}</div>
          </div>
          ${med.gordura ? `
          <div class="medicao-item">
            <div class="medicao-label">Gordura</div>
            <div class="medicao-valor">${med.gordura}%</div>
          </div>
          ` : '<div></div>'}
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

// Timeline
function adicionarEventoTimeline(evento) {
  let timeline = carregar('timeline') || [];
  
  // Evitar duplicatas
  const existe = timeline.some(e => 
    e.tipo === evento.tipo && 
    e.data === evento.data && 
    e.titulo === evento.titulo
  );
  
  if (!existe) {
    timeline.unshift(evento);
    salvar('timeline', timeline);
  }
}

function carregarTimeline() {
  let timeline = carregar('timeline') || [];
  const medicoes = carregar('medicoes') || [];
  const usuario = carregar('usuario');
  
  // Criar eventos iniciais
  if (timeline.length === 0 && usuario) {
    timeline.push({
      tipo: 'cadastro',
      data: usuario.dataCadastro.split('T')[0],
      titulo: 'In√≠cio da Jornada',
      descricao: `${usuario.nome} come√ßou no FitTrack! üéâ`
    });
    
    medicoes.forEach(med => {
      timeline.push({
        tipo: 'medicao',
        data: med.data,
        titulo: 'Avalia√ß√£o F√≠sica',
        descricao: `Peso: ${med.peso}kg ‚Ä¢ IMC: ${med.imc}`
      });
    });
    
    salvar('timeline', timeline);
  }
  
  timeline.sort((a, b) => new Date(b.data) - new Date(a.data));
  
  const container = document.getElementById('timelineContainer');
  
  if (timeline.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">üìÖ</div>
        <div class="empty-text">Sua jornada come√ßar√° em breve!</div>
      </div>
    `;
    return;
  }
  
  let html = '';
  const icones = {
    'cadastro': 'üéâ',
    'medicao': 'üìä',
    'treino': 'üí™',
    'meta': 'üéØ'
  };
  
  timeline.forEach(evento => {
    html += `
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-date">${new Date(evento.data + 'T00:00:00').toLocaleDateString('pt-BR')}</div>
          <div class="timeline-title">${icones[evento.tipo] || 'üìå'} ${evento.titulo}</div>
          <div style="color: var(--text-secondary); font-size: 0.9em; margin-top: 5px;">${evento.descricao}</div>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

// Perfil
function carregarPerfil() {
  const usuario = carregar('usuario');
  const medicoes = carregar('medicoes') || [];
  
  if (usuario) {
    const inicial = usuario.nome.charAt(0).toUpperCase();
    document.getElementById('perfilAvatar').textContent = inicial;
    document.getElementById('perfilName').textContent = usuario.nome;
    
    const objetivos = {
      'emagrecimento': 'üî• Emagrecimento',
      'hipertrofia': 'üí™ Ganho de Massa',
      'condicionamento': 'üèÉ Condicionamento',
      'saude': '‚ù§Ô∏è Sa√∫de e Bem-estar'
    };
    
    document.getElementById('perfilInfo').innerHTML = `
      ${calcularIdade(usuario.dataNascimento)} anos ‚Ä¢ ${objetivos[usuario.objetivo] || ''}
      <br>
      <span style="font-size: 0.85em; opacity: 0.8;">
        ${usuario.email || 'Sem email'} ‚Ä¢ ${medicoes.length} medi√ß√µes
      </span>
    `;
  }
}

// Modais
function fecharModal(modalId) {
  document.getElementById(modalId).classList.remove('active');
}

// Fechar modal ao clicar fora
window.onclick = function(event) {
  if (event.target.classList.contains('modal')) {
    event.target.classList.remove('active');
  }
}

// Menu
function abrirMenu() {
  if (confirm('üöÄ FitTrack v1.0\n\nDeseja ver mais op√ß√µes?')) {
    navegarPara('perfil');
  }
}

// Exportar dados
function exportarDados() {
  const dados = {
    usuario: carregar('usuario'),
    medicoes: carregar('medicoes'),
    timeline: carregar('timeline')
  };
  
  const dataStr = JSON.stringify(dados, null, 2);
  const dataBlob = new Blob([dataStr], {type: 'application/json'});
  
  const url = URL.createObjectURL(dataBlob);
  const link = document.createElement('a');
  link.href = url;
  link.download = 'fittrack-backup.json';
  link.click();
  
  mostrarToast('‚úÖ Dados exportados!');
}

// Limpar dados
function limparDados() {
  if (confirm('‚ö†Ô∏è Tem certeza que deseja apagar TODOS os dados?\n\nEsta a√ß√£o n√£o pode ser desfeita!')) {
    if (confirm('üö® √öLTIMA CONFIRMA√á√ÉO: Apagar tudo mesmo?')) {
      localStorage.clear();
      mostrarToast('üóëÔ∏è Dados apagados');
      setTimeout(() => {
        location.reload();
      }, 1500);
    }
  }
}

// Inicializar app
document.addEventListener('DOMContentLoaded', init);

console.log('‚úÖ FitTrack Mobile App carregado!');
</script>

</body>
</html>