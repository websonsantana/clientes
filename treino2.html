<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Treino de Corrida Personalizado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .glow {
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .heartbeat {
            animation: heartbeat 1.5s ease-in-out infinite both;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Custom transition for modal */
        .modal-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 200ms, transform 200ms;
        }
        
        .modal-exit {
            opacity: 1;
            transform: scale(1);
        }
        
        .modal-exit-active {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 200ms, transform 200ms;
        }

        /* Custom animation for reset button */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .reset-spin {
            animation: spin 1s linear;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Config Modal -->
        <div id="config-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg shadow-xl overflow-hidden w-full max-w-md mx-4">
                <div class="bg-blue-500 p-4 text-white text-center">
                    <i class="fas fa-cog text-3xl mb-2"></i>
                    <h3 class="text-xl font-bold">Configurar Plano de Treino</h3>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">N√≠vel do Atleta</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button data-level="beginner" class="level-btn bg-blue-100 text-blue-800 py-2 px-4 rounded border border-blue-200 font-medium hover:bg-blue-200">
                                <i class="fas fa-baby mr-1"></i> Iniciante
                            </button>
                            <button data-level="intermediate" class="level-btn bg-green-100 text-green-800 py-2 px-4 rounded border border-green-200 font-medium hover:bg-green-200">
                                <i class="fas fa-running mr-1"></i> Intermedi√°rio
                            </button>
                            <button data-level="advanced" class="level-btn bg-red-100 text-red-800 py-2 px-4 rounded border border-red-200 font-medium hover:bg-red-200">
                                <i class="fas fa-fire mr-1"></i> Avan√ßado
                            </button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">Meta de Dist√¢ncia</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button data-distance="5" class="distance-btn bg-purple-100 text-purple-800 py-2 px-4 rounded border border-purple-200 font-medium hover:bg-purple-200">
                                5 KM
                            </button>
                            <button data-distance="10" class="distance-btn bg-purple-100 text-purple-800 py-2 px-4 rounded border border-purple-200 font-medium hover:bg-purple-200">
                                10 KM
                            </button>
                            <button data-distance="21" class="distance-btn bg-purple-100 text-purple-800 py-2 px-4 rounded border border-purple-200 font-medium hover:bg-purple-200">
                                21 KM
                            </button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">Dura√ß√£o do Plano</label>
                        <select id="duration-select" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <option value="8">8 semanas</option>
                            <option value="12">12 semanas</option>
                            <option value="16">16 semanas</option>
                        </select>
                    </div>
                    
                    <div class="flex justify-between mt-6">
                        <button id="cancel-config" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                            Cancelar
                        </button>
                        <button id="reset-config" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded transition-all duration-300 flex items-center">
                            <i class="fas fa-undo-alt mr-2"></i> Resetar
                        </button>
                        <button id="save-config" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            Salvar Configura√ß√µes
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 to-indigo-700 rounded-lg shadow-md p-6 mb-8 text-white">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h1 class="text-3xl md:text-4xl font-bold">üèÉ‚Äç‚ôÇÔ∏è Plano de Treino de Corrida</h1>
                    <p class="text-blue-100 mt-2" id="plan-description">Prepare-se para correr <span id="goal-distance">5km</span> em <span id="goal-weeks">8</span> semanas!</p>
                </div>
                <div class="flex items-center space-x-2">
                    <button id="config-btn" class="bg-white text-blue-600 px-4 py-2 rounded-full font-semibold hover:bg-blue-50">
                        <i class="fas fa-cog mr-1"></i> Configurar
                    </button>
                    <div class="bg-white text-blue-600 px-4 py-2 rounded-full font-semibold">
                        <span id="current-week-text">Semana 1</span> de <span id="total-weeks">8</span>
                    </div>
                    <div class="hidden md:block">
                        <span class="bg-white text-blue-600 px-4 py-2 rounded-full font-semibold">
                            <span id="days-completed">0</span> dias completados
                        </span>
                    </div>
                </div>
            </div>
                            
            <div class="mt-6 flex flex-wrap gap-2">
                <div class="bg-white bg-opacity-20 px-3 py-2 rounded-full flex items-center">
                    <i class="fas fa-signal mr-2"></i> CA: Caminhada (50-65% FCM)
                </div>
                <div class="bg-white bg-opacity-20 px-3 py-2 rounded-full flex items-center">
                    <i class="fas fa-running mr-2"></i> LE: Corrida Leve (65-75% FCM)
                </div>
                <div class="bg-white bg-opacity-20 px-3 py-2 rounded-full flex items-center">
                    <i class="fas fa-fire mr-2"></i> MO: Corrida Moderada (75-85% FCM)
                </div>
                <div class="bg-white bg-opacity-20 px-3 py-2 rounded-full flex items-center">
                    <i class="fas fa-bolt mr-2"></i> FO: Corrida Forte (85-90% FCM)
                </div>
                <div class="bg-white bg-opacity-20 px-3 py-2 rounded-full flex items-center">
                    <i class="fas fa-heartbeat mr-2"></i> MF: Corrida Muito Forte (90-100% FCM)
                </div>
            </div>
        </header>
                        
        <!-- Progress Summary -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white rounded-lg shadow p-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500">Progresso</h3>
                    <i class="fas fa-chart-line text-blue-500"></i>
                </div>
                <div class="mt-2">
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="overall-progress" class="bg-blue-600 h-2.5 rounded-full" style="width: 12.5%"></div>
                    </div>
                    <div class="text-right mt-1 text-sm text-gray-600">
                        <span id="progress-percentage">12.5%</span> completo
                    </div>
                </div>
            </div>
                            
            <div class="bg-white rounded-lg shadow p-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500">Semanas</h3>
                    <i class="fas fa-calendar-week text-green-500"></i>
                </div>
                <div class="mt-2 text-2xl font-bold">
                    <span id="completed-weeks">0</span>/<span id="total-completed-weeks">8</span>
                </div>
            </div>
                            
            <div class="bg-white rounded-lg shadow p-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500">Treinos</h3>
                    <i class="fas fa-dumbbell text-yellow-500"></i>
                </div>
                <div class="mt-2 text-2xl font-bold">
                    <span id="completed-workouts">0</span>/<span id="total-workouts">24</span>
                </div>
            </div>
                            
            <div class="bg-white rounded-lg shadow p-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500">Meta Final</h3>
                    <i class="fas fa-flag-checkered text-red-500"></i>
                </div>
                <div class="mt-2 text-xl font-bold whitespace-nowrap">
                    <span id="final-goal">5K</span> em <span id="final-weeks">8</span> semanas
                </div>
            </div>
        </div>
                        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Week Navigation -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="bg-gray-800 text-white p-4 font-bold">
                        Selecione a Semana
                    </div>
                    <div class="p-4 space-y-2" id="week-buttons-container">
                        <!-- Week buttons will be generated by JavaScript -->
                    </div>
                                            
                    <div class="bg-gray-50 p-4 border-t">
                        <h3 class="font-bold text-gray-700 mb-2">Seu Progresso</h3>
                        <div class="flex items-center space-x-4">
                            <div class="relative w-full">
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div id="user-progress-bar" class="bg-gradient-to-r from-blue-400 to-purple-500 h-3 rounded-full" style="width: 0%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1 text-right">
                                    <span id="user-progress-text">0</span>%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                                    
                <!-- Legend -->
                <div class="bg-white rounded-lg shadow-md mt-6 p-4">
                    <h3 class="font-bold text-gray-700 mb-3">Legenda de Atividades</h3>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-green-200 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-walking text-green-700"></i>
                            </div>
                            <span class="text-sm">CA: Caminhada (50-65% FCM)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-running text-blue-700"></i>
                            </div>
                            <span class="text-sm">LE: Corrida Leve (65-75% FCM)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-fire text-yellow-700"></i>
                            </div>
                            <span class="text-sm">MO: Corrida Moderada (75-85% FCM)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-orange-200 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-bolt text-orange-700"></i>
                            </div>
                            <span class="text-sm">FO: Corrida Forte (85-90% FCM)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-red-200 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-heartbeat text-red-700"></i>
                            </div>
                            <span class="text-sm">MF: Corrida Muito Forte (90-100% FCM)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-coffee text-gray-700"></i>
                            </div>
                            <span class="text-sm">DAY OFF: Dia de descanso</span>
                        </div>
                    </div>
                </div>
                            
                <!-- Athlete Info -->
                <div class="bg-white rounded-lg shadow-md mt-6 p-4">
                    <h3 class="font-bold text-gray-700 mb-3">Informa√ß√µes do Atleta</h3>
                    <div class="space-y-3">
                        <div>
                            <span class="text-sm text-gray-500">N√≠vel:</span>
                            <div class="flex items-center mt-1">
                                <span id="athlete-level" class="font-medium">Iniciante</span>
                                <span id="level-badge" class="ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Novato</span>
                            </div>
                        </div>
                        <div>
                            <span class="text-sm text-gray-500">Meta:</span>
                            <div class="mt-1 font-medium" id="athlete-goal">5 KM</div>
                        </div>
                        <div>
                            <span class="text-sm text-gray-500">Dura√ß√£o:</span>
                            <div class="mt-1 font-medium" id="athlete-duration">8 semanas</div>
                        </div>
                    </div>
                </div>
            </div>
                            
            <!-- Week Schedule -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="bg-blue-600 text-white p-4 font-bold flex justify-between items-center">
                        <div>
                            <span id="selected-week-title">Semana 1</span>
                            <span class="text-blue-200 ml-2 font-normal text-sm">(Segunda a Domingo)</span>
                        </div>
                        <div class="flex space-x-2">
                            <button id="prev-week" class="bg-white text-blue-600 p-1 rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-50">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button id="next-week" class="bg-white text-blue-600 p-1 rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-50">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                                            
                    <div id="week-schedule" class="divide-y">
                        <!-- Week content will be inserted here by JavaScript -->
                    </div>
                                            
                    <div class="bg-gray-50 p-4 border-t">
                        <button id="save-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg w-full flex items-center justify-center">
                            <i class="fas fa-save mr-2"></i> Salvar Progresso
                        </button>
                    </div>
                </div>
                                    
                <!-- Current Week Stats -->
                <div class="bg-white rounded-lg shadow-md mt-6 p-6">
                    <h3 class="font-bold text-gray-700 mb-4 text-lg">Estat√≠sticas da Semana Atual</h3>
                    <div class="grid grid-cols-3 gap-4">
                        <div class="bg-blue-50 p-3 rounded-lg text-center">
                            <div class="text-3xl font-bold text-blue-600 mb-1">
                                <span id="current-week-completed">0</span>
                            </div>
                            <div class="text-xs text-blue-800">Treinos conclu√≠dos</div>
                        </div>
                        <div class="bg-green-50 p-3 rounded-lg text-center">
                            <div class="text-3xl font-bold text-green-600 mb-1">
                                <span id="current-week-rest">7</span>
                            </div>
                            <div class="text-xs text-green-800">Dias de descanso</div>
                        </div>
                        <div class="bg-orange-50 p-3 rounded-lg text-center">
                            <div class="text-3xl font-bold text-orange-600 mb-1">
                                <span id="current-week-duration">25</span>'
                            </div>
                            <div class="text-xs text-orange-800">Tempo total</div>
                        </div>
                    </div>
                </div>
                                    
                <!-- Workout Explanation -->
                <div class="bg-white rounded-lg shadow-md mt-6 p-6">
                    <h3 class="font-bold text-gray-700 mb-4 text-lg">Instru√ß√µes do Treino</h3>
                    <div id="workout-explanation" class="prose prose-sm">
                        <div class="alert alert-info bg-blue-50 text-blue-800 p-3 rounded-lg mb-4">
                            <i class="fas fa-info-circle mr-2"></i> Selecione um dia de treino para ver as instru√ß√µes detalhadas.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√µes padr√£o
        let userSettings = {
            level: 'beginner',
            distance: 5,
            duration: 8,
            currentWeek: 1,
            completedDays: [],
            completedWorkouts: 0
        };

        // Dados de treino para diferentes n√≠veis e dist√¢ncias
        const trainingPlans = {
            beginner: {
                5: generateBeginner5KPlan(),
                10: generateBeginner10KPlan(),
                21: generateBeginnerHalfMarathonPlan()
            },
            intermediate: {
                5: generateIntermediate5KPlan(),
                10: generateIntermediate10KPlan(),
                21: generateIntermediateHalfMarathonPlan()
            },
            advanced: {
                5: generateAdvanced5KPlan(),
                10: generateAdvanced10KPlan(),
                21: generateAdvancedHalfMarathonPlan()
            }
        };

        // DOM Elements
        const configModal = document.getElementById('config-modal');
        const configBtn = document.getElementById('config-btn');
        const cancelConfigBtn = document.getElementById('cancel-config');
        const saveConfigBtn = document.getElementById('save-config');
        const resetConfigBtn = document.getElementById('reset-config');
        const levelBtns = document.querySelectorAll('.level-btn');
        const distanceBtns = document.querySelectorAll('.distance-btn');
        const durationSelect = document.getElementById('duration-select');
        const weekButtonsContainer = document.getElementById('week-buttons-container');
        const weekSchedule = document.getElementById('week-schedule');
        const selectedWeekTitle = document.getElementById('selected-week-title');
        const prevWeekBtn = document.getElementById('prev-week');
        const nextWeekBtn = document.getElementById('next-week');
        const currentWeekText = document.getElementById('current-week-text');
        const totalWeeks = document.getElementById('total-weeks');
        const goalDistance = document.getElementById('goal-distance');
        const goalWeeks = document.getElementById('goal-weeks');
        const athleteLevel = document.getElementById('athlete-level');
        const levelBadge = document.getElementById('level-badge');
        const athleteGoal = document.getElementById('athlete-goal');
        const athleteDuration = document.getElementById('athlete-duration');
        const overallProgress = document.getElementById('overall-progress');
        const progressPercentage = document.getElementById('progress-percentage');
        const completedWeeks = document.getElementById('completed-weeks');
        const totalCompletedWeeks = document.getElementById('total-completed-weeks');
        const completedWorkouts = document.getElementById('completed-workouts');
        const totalWorkouts = document.getElementById('total-workouts');
        const finalGoal = document.getElementById('final-goal');
        const finalWeeks = document.getElementById('final-weeks');
        const userProgressBar = document.getElementById('user-progress-bar');
        const userProgressText = document.getElementById('user-progress-text');
        const daysCompleted = document.getElementById('days-completed');
        const currentWeekCompleted = document.getElementById('current-week-completed');
        const currentWeekRest = document.getElementById('current-week-rest');
        const currentWeekDuration = document.getElementById('current-week-duration');
        const workoutExplanation = document.getElementById('workout-explanation');
        const saveBtn = document.getElementById('save-btn');

        // Event Listeners
        configBtn.addEventListener('click', () => {
            configModal.classList.remove('hidden');
            // Set current selections in modal
            document.querySelector(`.level-btn[data-level="${userSettings.level}"]`).classList.add('glow');
            document.querySelector(`.distance-btn[data-distance="${userSettings.distance}"]`).classList.add('glow');
            durationSelect.value = userSettings.duration;
        });

        cancelConfigBtn.addEventListener('click', () => {
            configModal.classList.add('hidden');
            // Remove glow from all buttons
            document.querySelectorAll('.level-btn, .distance-btn').forEach(btn => {
                btn.classList.remove('glow');
            });
        });

        saveConfigBtn.addEventListener('click', saveSettings);

        resetConfigBtn.addEventListener('click', resetSettings);

        levelBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                levelBtns.forEach(b => b.classList.remove('glow'));
                btn.classList.add('glow');
            });
        });

        distanceBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                distanceBtns.forEach(b => b.classList.remove('glow'));
                btn.classList.add('glow');
            });
        });

        prevWeekBtn.addEventListener('click', () => {
            if (userSettings.currentWeek > 1) {
                userSettings.currentWeek--;
                updateUI();
            }
        });

        nextWeekBtn.addEventListener('click', () => {
            if (userSettings.currentWeek < userSettings.duration) {
                userSettings.currentWeek++;
                updateUI();
            }
        });

        saveBtn.addEventListener('click', () => {
            // Simulate saving to localStorage
            localStorage.setItem('runningPlanSettings', JSON.stringify(userSettings));
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center';
            successMsg.innerHTML = `
                <i class="fas fa-check-circle mr-2"></i>
                Progresso salvo com sucesso!
            `;
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                setTimeout(() => successMsg.remove(), 500);
            }, 3000);
        });

        // Initialize
        function init() {
            // Load settings from localStorage if available
            const savedSettings = localStorage.getItem('runningPlanSettings');
            if (savedSettings) {
                userSettings = JSON.parse(savedSettings);
            }
            
            updateUI();
        }

        // Update UI based on current settings
        function updateUI() {
            // Update header info
            currentWeekText.textContent = `Semana ${userSettings.currentWeek}`;
            totalWeeks.textContent = userSettings.duration;
            goalDistance.textContent = `${userSettings.distance}km`;
            goalWeeks.textContent = userSettings.duration;
            
            // Update athlete info
            athleteLevel.textContent = getLevelName(userSettings.level);
            athleteGoal.textContent = `${userSettings.distance} KM`;
            athleteDuration.textContent = `${userSettings.duration} semanas`;
            
            // Update level badge
            updateLevelBadge();
            
            // Update week buttons
            updateWeekButtons();
            
            // Update week schedule
            updateWeekSchedule();
            
            // Update progress
            updateProgress();
            
            // Update current week stats
            updateCurrentWeekStats();
        }

        function updateLevelBadge() {
            levelBadge.className = 'ml-2 text-xs px-2 py-1 rounded-full';
            switch(userSettings.level) {
                case 'beginner':
                    levelBadge.classList.add('bg-blue-100', 'text-blue-800');
                    levelBadge.textContent = 'Novato';
                    break;
                case 'intermediate':
                    levelBadge.classList.add('bg-green-100', 'text-green-800');
                    levelBadge.textContent = 'Intermedi√°rio';
                    break;
                case 'advanced':
                    levelBadge.classList.add('bg-red-100', 'text-red-800');
                    levelBadge.textContent = 'Avan√ßado';
                    break;
            }
        }

        function updateWeekButtons() {
            weekButtonsContainer.innerHTML = '';
            
            for (let i = 1; i <= userSettings.duration; i++) {
                const weekBtn = document.createElement('button');
                weekBtn.className = `w-full text-left p-3 rounded-lg transition-colors ${i === userSettings.currentWeek ? 'bg-blue-100 text-blue-800 font-bold' : 'hover:bg-gray-100'}`;
                weekBtn.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span>Semana ${i}</span>
                        ${userSettings.completedDays.filter(day => day.startsWith(`week${i}`)).length > 0 ? 
                         '<i class="fas fa-check-circle text-green-500"></i>' : 
                         '<i class="fas fa-circle text-gray-300"></i>'}
                    </div>
                `;
                
                weekBtn.addEventListener('click', () => {
                    userSettings.currentWeek = i;
                    updateUI();
                });
                
                weekButtonsContainer.appendChild(weekBtn);
            }
        }

        function updateWeekSchedule() {
            const plan = trainingPlans[userSettings.level][userSettings.distance];
            const weekData = plan[userSettings.currentWeek - 1];
            
            selectedWeekTitle.textContent = `Semana ${userSettings.currentWeek}`;
            weekSchedule.innerHTML = '';
            
            weekData.days.forEach((day, index) => {
                const dayElement = document.createElement('div');
                dayElement.className = 'p-4 hover:bg-gray-50 transition-colors';
                
                const dayName = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado', 'Domingo'][index];
                const isCompleted = userSettings.completedDays.includes(`week${userSettings.currentWeek}_day${index+1}`);
                
                dayElement.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full ${getActivityColorClass(day.type)} flex items-center justify-center mr-3">
                                <i class="${getActivityIcon(day.type)} ${getActivityTextColorClass(day.type)}"></i>
                            </div>
                            <div>
                                <h4 class="font-medium">${dayName}</h4>
                                <p class="text-sm text-gray-600">${day.description}</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-500 mr-3">${day.duration}'</span>
                            <button class="complete-btn w-8 h-8 rounded-full border ${isCompleted ? 'bg-green-100 border-green-300 text-green-600' : 'bg-white border-gray-300 text-gray-400'} flex items-center justify-center hover:bg-green-50">
                                <i class="fas fa-${isCompleted ? 'check' : 'plus'} text-sm"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                const completeBtn = dayElement.querySelector('.complete-btn');
                completeBtn.addEventListener('click', () => {
                    toggleDayComplete(userSettings.currentWeek, index + 1);
                });
                
                // Add click event to show workout details
                dayElement.addEventListener('click', (e) => {
                    if (e.target !== completeBtn && !completeBtn.contains(e.target)) {
                        showWorkoutDetails(day);
                    }
                });
                
                weekSchedule.appendChild(dayElement);
            });
        }

        function toggleDayComplete(week, day) {
            const dayId = `week${week}_day${day}`;
            const index = userSettings.completedDays.indexOf(dayId);
            
            if (index === -1) {
                userSettings.completedDays.push(dayId);
                userSettings.completedWorkouts++;
            } else {
                userSettings.completedDays.splice(index, 1);
                userSettings.completedWorkouts--;
            }
            
            updateUI();
        }

        function showWorkoutDetails(day) {
            workoutExplanation.innerHTML = '';
            
            let detailsHTML = `
                <h4 class="font-bold text-lg mb-2">${getActivityFullName(day.type)}</h4>
                <div class="mb-4 p-3 rounded-lg ${getActivityBgClass(day.type)}">
                    <p class="${getActivityTextColorClass(day.type)}"><i class="fas ${getActivityIcon(day.type)} mr-2"></i> ${day.description}</p>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="bg-gray-100 p-3 rounded-lg">
                        <p class="text-sm text-gray-500">Dura√ß√£o</p>
                        <p class="font-medium">${day.duration} minutos</p>
                    </div>
                    <div class="bg-gray-100 p-3 rounded-lg">
                        <p class="text-sm text-gray-500">Intensidade</p>
                        <p class="font-medium">${getIntensityLevel(day.type)}</p>
                    </div>
                </div>
                <div class="bg-gray-100 p-3 rounded-lg mb-4">
                    <p class="text-sm text-gray-500">Instru√ß√µes</p>
                    <p class="mt-1">${day.instructions}</p>
                </div>
            `;
            
            if (day.tips) {
                detailsHTML += `
                    <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                        <p class="text-sm text-blue-700 font-medium mb-1"><i class="fas fa-lightbulb mr-1"></i> Dicas</p>
                        <p class="text-blue-800">${day.tips}</p>
                    </div>
                `;
            }
            
            workoutExplanation.innerHTML = detailsHTML;
        }

        function updateProgress() {
            // Calculate overall progress
            const totalDays = userSettings.duration * 7; // 7 days per week
            const completedDaysCount = userSettings.completedDays.length;
            const progressPercent = Math.round((completedDaysCount / totalDays) * 100);
            
            // Update progress bar
            overallProgress.style.width = `${progressPercent}%`;
            progressPercentage.textContent = `${progressPercent}%`;
            
            // Update user progress
            userProgressBar.style.width = `${progressPercent}%`;
            userProgressText.textContent = `${progressPercent}%`;
            
            // Update completed weeks
            const weeksCompleted = new Set();
            userSettings.completedDays.forEach(day => {
                const week = day.match(/week(\d+)/)[1];
                weeksCompleted.add(week);
            });
            
            completedWeeks.textContent = weeksCompleted.size;
            totalCompletedWeeks.textContent = userSettings.duration;
            
            // Update completed workouts
            completedWorkouts.textContent = userSettings.completedWorkouts;
            
            // Calculate total workouts (3 per week)
            totalWorkouts.textContent = userSettings.duration * 3;
            
            // Update final goal
            finalGoal.textContent = `${userSettings.distance}K`;
            finalWeeks.textContent = userSettings.duration;
            
            // Update days completed
            daysCompleted.textContent = completedDaysCount;
        }

        function updateCurrentWeekStats() {
            const weekId = `week${userSettings.currentWeek}`;
            const weekDays = userSettings.completedDays.filter(day => day.startsWith(weekId));
            
            currentWeekCompleted.textContent = weekDays.length;
            currentWeekRest.textContent = 7 - weekDays.length;
            
            // Calculate total duration for the week
            const plan = trainingPlans[userSettings.level][userSettings.distance];
            const weekData = plan[userSettings.currentWeek - 1];
            let totalDuration = 0;
            
            weekData.days.forEach(day => {
                totalDuration += day.duration;
            });
            
            currentWeekDuration.textContent = totalDuration;
        }

        function saveSettings() {
            const selectedLevel = document.querySelector('.level-btn.glow')?.dataset.level || userSettings.level;
            const selectedDistance = parseInt(document.querySelector('.distance-btn.glow')?.dataset.distance || userSettings.distance);
            const selectedDuration = parseInt(durationSelect.value);
            
            userSettings.level = selectedLevel;
            userSettings.distance = selectedDistance;
            userSettings.duration = selectedDuration;
            
            // Reset current week if it's beyond the new duration
            if (userSettings.currentWeek > selectedDuration) {
                userSettings.currentWeek = 1;
            }
            
            // Filter out completed days that are beyond the new duration
            userSettings.completedDays = userSettings.completedDays.filter(day => {
                const week = parseInt(day.match(/week(\d+)/)[1]);
                return week <= selectedDuration;
            });
            
            // Recalculate completed workouts
            userSettings.completedWorkouts = userSettings.completedDays.length;
            
            configModal.classList.add('hidden');
            document.querySelectorAll('.level-btn, .distance-btn').forEach(btn => {
                btn.classList.remove('glow');
            });
            
            updateUI();
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center';
            successMsg.innerHTML = `
                <i class="fas fa-check-circle mr-2"></i>
                Configura√ß√µes salvas com sucesso!
            `;
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                setTimeout(() => successMsg.remove(), 500);
            }, 3000);
        }

        function resetSettings() {
            // Add spin animation to reset button
            resetConfigBtn.querySelector('i').classList.add('reset-spin');
            setTimeout(() => {
                resetConfigBtn.querySelector('i').classList.remove('reset-spin');
            }, 1000);
            
            // Reset to default settings
            userSettings = {
                level: 'beginner',
                distance: 5,
                duration: 8,
                currentWeek: 1,
                completedDays: [],
                completedWorkouts: 0
            };
            
            // Update UI to reflect reset
            document.querySelector('.level-btn[data-level="beginner"]').classList.add('glow');
            document.querySelector('.distance-btn[data-distance="5"]').classList.add('glow');
            durationSelect.value = 8;
            
            // Show confirmation message
            const confirmMsg = document.createElement('div');
            confirmMsg.className = 'fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center';
            confirmMsg.innerHTML = `
                <i class="fas fa-check-circle mr-2"></i>
                Configura√ß√µes resetadas para padr√£o!
            `;
            document.body.appendChild(confirmMsg);
            
            setTimeout(() => {
                confirmMsg.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                setTimeout(() => confirmMsg.remove(), 500);
            }, 3000);
        }

        // Helper functions
        function getLevelName(level) {
            switch(level) {
                case 'beginner': return 'Iniciante';
                case 'intermediate': return 'Intermedi√°rio';
                case 'advanced': return 'Avan√ßado';
                default: return '';
            }
        }

        function getActivityColorClass(type) {
            switch(type) {
                case 'CA': return 'bg-green-200';
                case 'LE': return 'bg-blue-200';
                case 'MO': return 'bg-yellow-200';
                case 'FO': return 'bg-orange-200';
                case 'MF': return 'bg-red-200';
                default: return 'bg-gray-200';
            }
        }

        function getActivityTextColorClass(type) {
            switch(type) {
                case 'CA': return 'text-green-700';
                case 'LE': return 'text-blue-700';
                case 'MO': return 'text-yellow-700';
                case 'FO': return 'text-orange-700';
                case 'MF': return 'text-red-700';
                default: return 'text-gray-700';
            }
        }

        function getActivityBgClass(type) {
            switch(type) {
                case 'CA': return 'bg-green-100 border border-green-200';
                case 'LE': return 'bg-blue-100 border border-blue-200';
                case 'MO': return 'bg-yellow-100 border border-yellow-200';
                case 'FO': return 'bg-orange-100 border border-orange-200';
                case 'MF': return 'bg-red-100 border border-red-200';
                default: return 'bg-gray-100 border border-gray-200';
            }
        }

        function getActivityIcon(type) {
            switch(type) {
                case 'CA': return 'fa-walking';
                case 'LE': return 'fa-running';
                case 'MO': return 'fa-fire';
                case 'FO': return 'fa-bolt';
                case 'MF': return 'fa-heartbeat';
                default: return 'fa-coffee';
            }
        }

        function getActivityFullName(type) {
            switch(type) {
                case 'CA': return 'Caminhada';
                case 'LE': return 'Corrida Leve';
                case 'MO': return 'Corrida Moderada';
                case 'FO': return 'Corrida Forte';
                case 'MF': return 'Corrida Muito Forte';
                default: return 'Descanso';
            }
        }

        function getIntensityLevel(type) {
            switch(type) {
                case 'CA': return '50-65% FCM (Muito leve)';
                case 'LE': return '65-75% FCM (Leve)';
                case 'MO': return '75-85% FCM (Moderado)';
                case 'FO': return '85-90% FCM (Forte)';
                case 'MF': return '90-100% FCM (Muito forte)';
                default: return 'Descanso';
            }
        }

        // Training plan generators
        function generateBeginner5KPlan() {
            const plan = [];
            for (let week = 1; week <= 8; week++) {
                const days = [];
                
                // Monday
                days.push({
                    type: 'CA',
                    description: 'Caminhada leve',
                    duration: week <= 2 ? 20 : 25,
                    instructions: 'Caminhe em ritmo confort√°vel, mantendo uma postura ereta e respira√ß√£o regular.',
                    tips: week <= 2 ? 'Foque em manter um ritmo constante.' : 'Tente aumentar levemente o ritmo nos √∫ltimos 5 minutos.'
                });
                
                // Tuesday - Rest
                days.push({
                    type: 'OFF',
                    description: 'Dia de descanso',
                    duration: 0,
                    instructions: 'Descanse ou fa√ßa alongamentos leves.',
                    tips: 'Aproveite para se hidratar bem e se alimentar corretamente.'
                });
                
                // Wednesday
                days.push({
                    type: week <= 4 ? 'CA' : 'LE',
                    description: week <= 4 ? 'Caminhada leve' : 'Corrida leve',
                    duration: week <= 2 ? 20 : 25,
                    instructions: week <= 4 ? 
                        'Caminhe em ritmo confort√°vel.' : 
                        'Intercale 1 minuto de corrida leve com 2 minutos de caminhada.',
                    tips: week <= 4 ? 
                        'Mantenha um ritmo constante.' : 
                        'N√£o se preocupe com velocidade, foque em manter a t√©cnica.'
                });
                
                // Thursday - Rest
                days.push({
                    type: 'OFF',
                    description: 'Dia de descanso',
                    duration: 0,
                    instructions: 'Descanse ou fa√ßa alongamentos leves.',
                    tips: 'Pratique exerc√≠cios de respira√ß√£o para melhorar sua capacidade pulmonar.'
                });
                
                // Friday
                days.push({
                    type: 'CA',
                    description: 'Caminhada leve',
                    duration: week <= 2 ? 20 : 25,
                    instructions: 'Caminhe em ritmo confort√°vel.',
                    tips: 'Aproveite para observar sua postura durante a caminhada.'
                });
                
                // Saturday
                days.push({
                    type: week <= 2 ? 'CA' : (week <= 4 ? 'LE' : 'MO'),
                    description: week <= 2 ? 'Caminhada longa' : (week <= 4 ? 'Corrida leve' : 'Corrida moderada'),
                    duration: week <= 2 ? 30 : (week <= 4 ? 25 : 30),
                    instructions: week <= 2 ? 
                        'Caminhe em ritmo confort√°vel por um per√≠odo mais longo.' : 
                        (week <= 4 ? 
                            'Corra em ritmo leve, intercalando com caminhada se necess√°rio.' : 
                            'Corra em ritmo moderado, intercalando com caminhada se necess√°rio.'),
                    tips: 'Este √© o treino mais importante da semana. Foque em completar o tempo.'
                });
                
                // Sunday - Rest
                days.push({
                    type: 'OFF',
                    description: 'Dia de descanso',
                    duration: 0,
                    instructions: 'Descanse completamente.',
                    tips: 'Aproveite para se recuperar para a pr√≥xima semana de treinos.'
                });
                
                plan.push({ days });
            }
            
            return plan;
        }

        function generateBeginner10KPlan() {
            // Similar structure but with longer durations and progression
            const plan = [];
            // ... implementation similar to 5K but adjusted for 10K
            return plan;
        }

        function generateBeginnerHalfMarathonPlan() {
            // Similar structure but with longer durations and slower progression
            const plan = [];
            // ... implementation similar to 5K but adjusted for half marathon
            return plan;
        }

        function generateIntermediate5KPlan() {
            const plan = [];
            // ... implementation with more running and less walking
            return plan;
        }

        function generateIntermediate10KPlan() {
            const plan = [];
            // ... implementation
            return plan;
        }

        function generateIntermediateHalfMarathonPlan() {
            const plan = [];
            // ... implementation
            return plan;
        }

        function generateAdvanced5KPlan() {
            const plan = [];
            // ... implementation with more intense workouts
            return plan;
        }

        function generateAdvanced10KPlan() {
            const plan = [];
            // ... implementation
            return plan;
        }

        function generateAdvancedHalfMarathonPlan() {
            const plan = [];
            // ... implementation
            return plan;
        }

        // Initialize the app
        init();
    </script>
</body>
</html>